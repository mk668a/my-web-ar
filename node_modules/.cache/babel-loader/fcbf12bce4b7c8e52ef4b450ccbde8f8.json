{"remainingRequest":"/Users/mk/Desktop/git/my-web-ar/node_modules/babel-loader/lib/index.js!/Users/mk/Desktop/git/my-web-ar/src/views/create/threex-arpatternfile.js","dependencies":[{"path":"/Users/mk/Desktop/git/my-web-ar/src/views/create/threex-arpatternfile.js","mtime":1575261825942},{"path":"/Users/mk/Desktop/git/my-web-ar/node_modules/cache-loader/dist/cjs.js","mtime":1575261812576},{"path":"/Users/mk/Desktop/git/my-web-ar/node_modules/babel-loader/lib/index.js","mtime":1575261810540}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5wYWQtc3RhcnQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybCI7CnZhciBUSFJFRXggPSBUSFJFRXggfHwge307ClRIUkVFeC5BclBhdHRlcm5GaWxlID0ge307CgpUSFJFRXguQXJQYXR0ZXJuRmlsZS50b0NhbnZhcyA9IGZ1bmN0aW9uIChwYXR0ZXJuRmlsZVN0cmluZywgb25Db21wbGV0ZSkgewogIGNvbnNvbGUuYXNzZXJ0KGZhbHNlLCAnbm90IHlldCBpbXBsZW1lbnRlZCcpOwp9OyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8JCWZ1bmN0aW9uIHRvIGVuY29kZSBpbWFnZQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCgpUSFJFRXguQXJQYXR0ZXJuRmlsZS5lbmNvZGVJbWFnZVVSTCA9IGZ1bmN0aW9uIChpbWFnZVVSTCwgb25Db21wbGV0ZSkgewogIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpOwoKICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgcGF0dGVybkZpbGVTdHJpbmcgPSBUSFJFRXguQXJQYXR0ZXJuRmlsZS5lbmNvZGVJbWFnZShpbWFnZSk7CiAgICBvbkNvbXBsZXRlKHBhdHRlcm5GaWxlU3RyaW5nKTsKICB9OwoKICBpbWFnZS5zcmMgPSBpbWFnZVVSTDsKfTsKClRIUkVFeC5BclBhdHRlcm5GaWxlLmVuY29kZUltYWdlID0gZnVuY3Rpb24gKGltYWdlKSB7CiAgLy8gY29weSBpbWFnZSBvbiBjYW52YXMKICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICBjYW52YXMud2lkdGggPSAxNjsKICBjYW52YXMuaGVpZ2h0ID0gMTY7IC8vIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2FudmFzKQogIC8vIGNhbnZhcy5zdHlsZS53aWR0aCA9ICcyMDBweCcKCiAgdmFyIHBhdHRlcm5GaWxlU3RyaW5nID0gJyc7CgogIGZvciAodmFyIG9yaWVudGF0aW9uID0gMDsgb3JpZW50YXRpb24gPiAtMiAqIE1hdGguUEk7IG9yaWVudGF0aW9uIC09IE1hdGguUEkgLyAyKSB7CiAgICAvLyBkcmF3IG9uIGNhbnZhcyAtIGhvbm9yIG9yaWVudGF0aW9uCiAgICBjb250ZXh0LnNhdmUoKTsKICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICBjb250ZXh0LnRyYW5zbGF0ZShjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMik7CiAgICBjb250ZXh0LnJvdGF0ZShvcmllbnRhdGlvbik7CiAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgLWNhbnZhcy53aWR0aCAvIDIsIC1jYW52YXMuaGVpZ2h0IC8gMiwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgIGNvbnRleHQucmVzdG9yZSgpOyAvLyBnZXQgaW1hZ2VEYXRhCgogICAgdmFyIGltYWdlRGF0YSA9IGNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7IC8vIGdlbmVyYXRlIHRoZSBwYXR0ZXJuRmlsZVN0cmluZyBmb3IgdGhpcyBvcmllbnRhdGlvbgoKICAgIGlmIChvcmllbnRhdGlvbiAhPT0gMCkgcGF0dGVybkZpbGVTdHJpbmcgKz0gJ1xuJzsgLy8gTk9URSBiZ3Igb3JkZXIgYW5kIG5vdCByZ2IhISEgc28gZnJvbSAyIHRvIDAKCiAgICBmb3IgKHZhciBjaGFubmVsT2Zmc2V0ID0gMjsgY2hhbm5lbE9mZnNldCA+PSAwOyBjaGFubmVsT2Zmc2V0LS0pIHsKICAgICAgLy8gY29uc29sZS5sb2coJ2NoYW5uZWxPZmZzZXQnLCBjaGFubmVsT2Zmc2V0KQogICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGltYWdlRGF0YS5oZWlnaHQ7IHkrKykgewogICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgaW1hZ2VEYXRhLndpZHRoOyB4KyspIHsKICAgICAgICAgIGlmICh4ICE9PSAwKSBwYXR0ZXJuRmlsZVN0cmluZyArPSAnICc7CiAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIGltYWdlRGF0YS53aWR0aCAqIDQgKyB4ICogNCArIGNoYW5uZWxPZmZzZXQ7CiAgICAgICAgICB2YXIgdmFsdWUgPSBpbWFnZURhdGEuZGF0YVtvZmZzZXRdOwogICAgICAgICAgcGF0dGVybkZpbGVTdHJpbmcgKz0gU3RyaW5nKHZhbHVlKS5wYWRTdGFydCgzKTsKICAgICAgICB9CgogICAgICAgIHBhdHRlcm5GaWxlU3RyaW5nICs9ICdcbic7CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiBwYXR0ZXJuRmlsZVN0cmluZzsKfTsgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vCQl0cmlnZ2VyIGRvd25sb2FkCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKClRIUkVFeC5BclBhdHRlcm5GaWxlLnRyaWdnZXJEb3dubG9hZCA9IGZ1bmN0aW9uIChwYXR0ZXJuRmlsZVN0cmluZykgewogIHZhciBmaWxlTmFtZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJ3BhdHRlcm4tbWFya2VyLnBhdHQnOwogIC8vIHRlY2ggZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zNjY1MTE1L2NyZWF0ZS1hLWZpbGUtaW4tbWVtb3J5LWZvci11c2VyLXRvLWRvd25sb2FkLW5vdC10aHJvdWdoLXNlcnZlcgogIHZhciBkb21FbGVtZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICBkb21FbGVtZW50LmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbcGF0dGVybkZpbGVTdHJpbmddLCB7CiAgICB0eXBlOiAndGV4dC9wbGFpbicKICB9KSk7CiAgZG9tRWxlbWVudC5kb3dubG9hZCA9IGZpbGVOYW1lOwogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZG9tRWxlbWVudCk7CiAgZG9tRWxlbWVudC5jbGljaygpOwogIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZG9tRWxlbWVudCk7Cn07CgpUSFJFRXguQXJQYXR0ZXJuRmlsZS5idWlsZEZ1bGxNYXJrZXIgPSBmdW5jdGlvbiAoaW5uZXJJbWFnZVVSTCwgcGF0dFJhdGlvLCBzaXplLCBjb2xvciwgb25Db21wbGV0ZSkgewogIHZhciB3aGl0ZU1hcmdpbiA9IDAuMTsKICB2YXIgYmxhY2tNYXJnaW4gPSAoMSAtIDIgKiB3aGl0ZU1hcmdpbikgKiAoKDEgLSBwYXR0UmF0aW8pIC8gMik7IC8vIHZhciBibGFja01hcmdpbiA9IDAuMgoKICB2YXIgaW5uZXJNYXJnaW4gPSB3aGl0ZU1hcmdpbiArIGJsYWNrTWFyZ2luOwogIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogIGNhbnZhcy53aWR0aCA9IGNhbnZhcy5oZWlnaHQgPSBzaXplOwogIGNvbnRleHQuZmlsbFN0eWxlID0gJ3doaXRlJzsKICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7IC8vIGNvcHkgaW1hZ2Ugb24gY2FudmFzCgogIGNvbnRleHQuZmlsbFN0eWxlID0gY29sb3I7CiAgY29udGV4dC5maWxsUmVjdCh3aGl0ZU1hcmdpbiAqIGNhbnZhcy53aWR0aCwgd2hpdGVNYXJnaW4gKiBjYW52YXMuaGVpZ2h0LCBjYW52YXMud2lkdGggKiAoMSAtIDIgKiB3aGl0ZU1hcmdpbiksIGNhbnZhcy5oZWlnaHQgKiAoMSAtIDIgKiB3aGl0ZU1hcmdpbikpOyAvLyBjbGVhciB0aGUgYXJlYSBmb3IgaW5uZXJJbWFnZSAoaW4gY2FzZSBvZiB0cmFuc3BhcmVudCBpbWFnZSkKCiAgY29udGV4dC5maWxsU3R5bGUgPSAnd2hpdGUnOwogIGNvbnRleHQuZmlsbFJlY3QoaW5uZXJNYXJnaW4gKiBjYW52YXMud2lkdGgsIGlubmVyTWFyZ2luICogY2FudmFzLmhlaWdodCwgY2FudmFzLndpZHRoICogKDEgLSAyICogaW5uZXJNYXJnaW4pLCBjYW52YXMuaGVpZ2h0ICogKDEgLSAyICogaW5uZXJNYXJnaW4pKTsgLy8gZGlzcGxheSBpbm5lckltYWdlIGluIHRoZSBtaWRkbGUKCiAgdmFyIGlubmVySW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICBpbm5lckltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7CiAgICAvLyBkcmF3IGlubmVySW1hZ2UKICAgIGNvbnRleHQuZHJhd0ltYWdlKGlubmVySW1hZ2UsIGlubmVyTWFyZ2luICogY2FudmFzLndpZHRoLCBpbm5lck1hcmdpbiAqIGNhbnZhcy5oZWlnaHQsIGNhbnZhcy53aWR0aCAqICgxIC0gMiAqIGlubmVyTWFyZ2luKSwgY2FudmFzLmhlaWdodCAqICgxIC0gMiAqIGlubmVyTWFyZ2luKSk7CiAgICB2YXIgaW1hZ2VVcmwgPSBjYW52YXMudG9EYXRhVVJMKCk7CiAgICBvbkNvbXBsZXRlKGltYWdlVXJsKTsKICB9KTsKICBpbm5lckltYWdlLnNyYyA9IGlubmVySW1hZ2VVUkw7Cn07CgpleHBvcnQgZGVmYXVsdCB7CiAgVEhSRUV4OiBUSFJFRXgKfTs="},{"version":3,"sources":["/Users/mk/Desktop/git/my-web-ar/src/views/create/threex-arpatternfile.js"],"names":["THREEx","ArPatternFile","toCanvas","patternFileString","onComplete","console","assert","encodeImageURL","imageURL","image","Image","onload","encodeImage","src","canvas","document","createElement","context","getContext","width","height","orientation","Math","PI","save","clearRect","translate","rotate","drawImage","restore","imageData","getImageData","channelOffset","y","x","offset","value","data","String","padStart","triggerDownload","fileName","domElement","window","href","URL","createObjectURL","Blob","type","download","body","appendChild","click","removeChild","buildFullMarker","innerImageURL","pattRatio","size","color","whiteMargin","blackMargin","innerMargin","fillStyle","fillRect","innerImage","addEventListener","imageUrl","toDataURL"],"mappings":"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","sourcesContent":["var THREEx = THREEx || {}\n\nTHREEx.ArPatternFile = {}\n\nTHREEx.ArPatternFile.toCanvas = function (patternFileString, onComplete) {\n    console.assert(false, 'not yet implemented')\n}\n\n//////////////////////////////////////////////////////////////////////////////\n//\t\tfunction to encode image\n//////////////////////////////////////////////////////////////////////////////\n\nTHREEx.ArPatternFile.encodeImageURL = function (imageURL, onComplete) {\n    var image = new Image;\n    image.onload = function () {\n        var patternFileString = THREEx.ArPatternFile.encodeImage(image)\n        onComplete(patternFileString)\n    }\n    image.src = imageURL;\n}\n\nTHREEx.ArPatternFile.encodeImage = function (image) {\n    // copy image on canvas\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d')\n    canvas.width = 16;\n    canvas.height = 16;\n\n    // document.body.appendChild(canvas)\n    // canvas.style.width = '200px'\n\n\n    var patternFileString = ''\n    for (var orientation = 0; orientation > -2 * Math.PI; orientation -= Math.PI / 2) {\n        // draw on canvas - honor orientation\n        context.save();\n        context.clearRect(0, 0, canvas.width, canvas.height);\n        context.translate(canvas.width / 2, canvas.height / 2);\n        context.rotate(orientation);\n        context.drawImage(image, -canvas.width / 2, -canvas.height / 2, canvas.width, canvas.height);\n        context.restore();\n\n        // get imageData\n        var imageData = context.getImageData(0, 0, canvas.width, canvas.height)\n\n        // generate the patternFileString for this orientation\n        if (orientation !== 0) patternFileString += '\\n'\n        // NOTE bgr order and not rgb!!! so from 2 to 0\n        for (var channelOffset = 2; channelOffset >= 0; channelOffset--) {\n            // console.log('channelOffset', channelOffset)\n            for (var y = 0; y < imageData.height; y++) {\n                for (var x = 0; x < imageData.width; x++) {\n\n                    if (x !== 0) patternFileString += ' '\n\n                    var offset = (y * imageData.width * 4) + (x * 4) + channelOffset\n                    var value = imageData.data[offset]\n\n                    patternFileString += String(value).padStart(3);\n                }\n                patternFileString += '\\n'\n            }\n        }\n    }\n\n    return patternFileString\n}\n\n//////////////////////////////////////////////////////////////////////////////\n//\t\ttrigger download\n//////////////////////////////////////////////////////////////////////////////\n\nTHREEx.ArPatternFile.triggerDownload = function (patternFileString, fileName = 'pattern-marker.patt') {\n    // tech from https://stackoverflow.com/questions/3665115/create-a-file-in-memory-for-user-to-download-not-through-server\n    var domElement = window.document.createElement('a');\n    domElement.href = window.URL.createObjectURL(new Blob([patternFileString], { type: 'text/plain' }));\n    domElement.download = fileName;\n    document.body.appendChild(domElement)\n    domElement.click();\n    document.body.removeChild(domElement)\n}\n\nTHREEx.ArPatternFile.buildFullMarker = function (innerImageURL, pattRatio, size, color, onComplete) {\n    var whiteMargin = 0.1\n    var blackMargin = (1 - 2 * whiteMargin) * ((1 - pattRatio) / 2)\n    // var blackMargin = 0.2\n\n    var innerMargin = whiteMargin + blackMargin\n\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d')\n    canvas.width = canvas.height = size\n\n    context.fillStyle = 'white';\n    context.fillRect(0, 0, canvas.width, canvas.height)\n\n    // copy image on canvas\n    context.fillStyle = color;\n    context.fillRect(\n        whiteMargin * canvas.width,\n        whiteMargin * canvas.height,\n        canvas.width * (1 - 2 * whiteMargin),\n        canvas.height * (1 - 2 * whiteMargin)\n    );\n\n    // clear the area for innerImage (in case of transparent image)\n    context.fillStyle = 'white';\n    context.fillRect(\n        innerMargin * canvas.width,\n        innerMargin * canvas.height,\n        canvas.width * (1 - 2 * innerMargin),\n        canvas.height * (1 - 2 * innerMargin)\n    );\n\n\n    // display innerImage in the middle\n    var innerImage = document.createElement('img')\n    innerImage.addEventListener('load', function () {\n        // draw innerImage\n        context.drawImage(innerImage,\n            innerMargin * canvas.width,\n            innerMargin * canvas.height,\n            canvas.width * (1 - 2 * innerMargin),\n            canvas.height * (1 - 2 * innerMargin)\n        );\n\n        var imageUrl = canvas.toDataURL()\n        onComplete(imageUrl)\n    })\n    innerImage.src = innerImageURL\n}\n\nexport default { THREEx }"]}]}