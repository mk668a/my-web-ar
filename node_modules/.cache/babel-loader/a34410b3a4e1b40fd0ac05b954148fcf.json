{"remainingRequest":"/Users/mk/Desktop/webar/node_modules/babel-loader/lib/index.js!/Users/mk/Desktop/webar/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mk/Desktop/webar/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mk/Desktop/webar/src/views/list/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mk/Desktop/webar/src/views/list/index.vue","mtime":1574695405741},{"path":"/Users/mk/Desktop/webar/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mk/Desktop/webar/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mk/Desktop/webar/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mk/Desktop/webar/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmV2ZXJzZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGVsZXRlQVI6IHVuZGVmaW5lZCwKICAgICAgYXJEYXRhOiBuZXcgQXJyYXkoKSwKICAgICAgaGlybzogcmVxdWlyZSgiQC9hc3NldHMvaW1nL0hJUk8uanBnIiksCiAgICAgIGV4dGVybmFsOiByZXF1aXJlKCJAL2Fzc2V0cy9zdmcvZXh0ZXJuYWwtbGluay1zeW1ib2wuc3ZnIikKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7fSwKICBtZXRob2RzOiB7CiAgICBnZXRBckRhdGE6IGZ1bmN0aW9uIGdldEFyRGF0YSgpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICByZXR1cm4gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIi9kYXRhIikub25jZSgidmFsdWUiKS50aGVuKGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgIHZhciByZXMgPSBzbmFwc2hvdC52YWwoKTsKCiAgICAgICAgZm9yICh2YXIgaSBpbiByZXMpIHsKICAgICAgICAgIHNlbGYuYXJEYXRhLnB1c2goewogICAgICAgICAgICBrZXk6IGksCiAgICAgICAgICAgIHRpdGxlOiByZXNbaV0udGl0bGUsCiAgICAgICAgICAgIG1hcmtlcjogcmVzW2ldLm1hcmtlciwKICAgICAgICAgICAgcXI6IHJlc1tpXS5xciwKICAgICAgICAgICAgbW9kZWw6IHJlc1tpXS5tb2RlbCwKICAgICAgICAgICAgb3JpZ2luYWw6IHJlc1tpXS5vcmlnaW5hbAogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLmxvZyhzZWxmLmFyRGF0YSk7IC8vIOmAhumghuOBq+OBmeOCiwoKICAgICAgICBzZWxmLmFyRGF0YSA9IHNlbGYuYXJEYXRhLnJldmVyc2UoKTsKICAgICAgfSk7CiAgICB9LAogICAgaHRtbFRvTm9kZTogZnVuY3Rpb24gaHRtbFRvTm9kZShodG1sU3RyKSB7CiAgICAgIGlmICghaHRtbFN0ciB8fCB0eXBlb2YgaHRtbFN0ciAhPT0gInN0cmluZyIpIHJldHVybjsKICAgICAgdmFyIHRtcEVsbXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSwKICAgICAgICAgIGkgPSAwLAogICAgICAgICAgbGVuID0gMCwKICAgICAgICAgIG5vZGVzID0gW107IC8vIOmrmOmAn+WHpueQhuOBmeOCi+OBjOWvvuW/nOODluODqeOCpuOCtuOCkuiAg+OBiGlubmVySFRNTOOCkuS9v+eUqAoKICAgICAgdG1wRWxtdC5pbm5lckhUTUwgPSBodG1sU3RyOyAvLyB0bXBFbG10Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgaHRtbFN0cik7CgogICAgICByZXR1cm4gdG1wRWxtdC5jaGlsZE5vZGVzOwogICAgfSwKICAgIHNldERvbTogZnVuY3Rpb24gc2V0RG9tKCkgewogICAgICAvLyBjb25zb2xlLmxvZygic2V0Iik7CiAgICAgIHZhciBhckRhdGEgPSB0aGlzLmFyRGF0YTsKCiAgICAgIGZvciAodmFyIGkgaW4gYXJEYXRhKSB7CiAgICAgICAgdmFyIHRpdGxlID0gYXJEYXRhW2ldLnRpdGxlOwogICAgICAgIHZhciBtb2RlbCA9IGFyRGF0YVtpXS5tb2RlbDsKICAgICAgICB2YXIgbWFya2VyID0gYXJEYXRhW2ldLm1hcmtlcjsKICAgICAgICB2YXIgcXIgPSBhckRhdGFbaV0ucXI7IC8vIGdldCBkaXYKCiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkYXRhLSIuY29uY2F0KGkpKTsgLy8gY29uc29sZS5sb2coZGl2KTsKICAgICAgICAvLyBnZXQgc3BhbgoKICAgICAgICBpZiAoZGl2KSB7CiAgICAgICAgICB2YXIgc3BhbiA9IGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSgic3BhbiIpWzBdOyAvLyBjb25zb2xlLmxvZyhzcGFuKTsKICAgICAgICAgIC8vIGdldCBsaXN0LWEtZnJhbWUKCiAgICAgICAgICB2YXIgbGlzdEFGcmFtZSA9IHNwYW4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgibGlzdC1hLWZyYW1lIilbMF07IC8vIGNvbnNvbGUubG9nKGxpc3RBRnJhbWUpOwogICAgICAgICAgLy8gY3JlYXRlIGEtc2NlbmUKICAgICAgICAgIC8vIDxhLXNjZW5lIGVtYmVkZGVkPjwvYS1zY2VuZT47CgogICAgICAgICAgdmFyIGFzY2VuZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEtc2NlbmUiKTsKICAgICAgICAgIGFzY2VuZS5zZXRBdHRyaWJ1dGUoImVtYmVkZGVkIiwgIiIpOyAvLyBzZXQgbW9kZWwgdG8gYS1zY2VuZQogICAgICAgICAgLy8gPGEtc2NlbmUgZW1iZWRkZWQ+CiAgICAgICAgICAvLyAgIDxtb2RlbD48L21vZGVsPgogICAgICAgICAgLy8gPC9hLXNjZW5lPjsKCiAgICAgICAgICBpZiAobW9kZWwpIHsKICAgICAgICAgICAgZm9yICh2YXIgaiBpbiBtb2RlbCkgewogICAgICAgICAgICAgIHZhciBtb2RlbENoaWxkID0gdGhpcy5odG1sVG9Ob2RlKG1vZGVsW2pdKTsKICAgICAgICAgICAgICBpZiAobW9kZWxDaGlsZCkgYXNjZW5lLmFwcGVuZENoaWxkKG1vZGVsQ2hpbGRbMF0pOwogICAgICAgICAgICB9IC8vIGNvbnNvbGUubG9nKCJzZXQgbW9kZWwgdG8gYS1zY2VuZSIpOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhc2NlbmUpOwoKICAgICAgICAgIH0gLy8gc2V0IGh1bWFuIGNhbWVyYSB0byBhLXNjZW5lCiAgICAgICAgICAvLyA8YS1zY2VuZSBlbWJlZGRlZD4KICAgICAgICAgIC8vICAgPG1vZGVsPjwvbW9kZWw+CiAgICAgICAgICAvLyAgIDxhLWVudGl0eSBjYW1lcmE+PC9hLWVudGl0eT4KICAgICAgICAgIC8vIDwvYS1zY2VuZT47CgoKICAgICAgICAgIHZhciBjYW1lcmEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhLWVudGl0eSIpOwogICAgICAgICAgY2FtZXJhLnNldEF0dHJpYnV0ZSgiY2FtZXJhIiwgIiIpOwogICAgICAgICAgY2FtZXJhLnNldEF0dHJpYnV0ZSgibG9vay1jb250cm9scyIsICIiKTsKICAgICAgICAgIGNhbWVyYS5zZXRBdHRyaWJ1dGUoInBvc2l0aW9uIiwgIjEgMS41IDMiKTsKICAgICAgICAgIGFzY2VuZS5hcHBlbmRDaGlsZChjYW1lcmEpOyAvLyBzZXQgYXNjZW5lIHRvIGxpc3QtYS1mcmFtZQogICAgICAgICAgLy8gICAgIDxkaXYgY2xhc3M9Imxpc3QtYS1mcmFtZSI+CiAgICAgICAgICAvLyAgICAgICA8YS1zY2VuZSBlbWJlZGRlZD4KICAgICAgICAgIC8vICAgICAgICAgPG1vZGVsPjwvbW9kZWw+CiAgICAgICAgICAvLyAgICAgICA8L2Etc2NlbmU+CiAgICAgICAgICAvLyAgICAgPC9kaXY+CgogICAgICAgICAgbGlzdEFGcmFtZS5pbnNlcnRCZWZvcmUoYXNjZW5lLCBsaXN0QUZyYW1lLmZpcnN0Q2hpbGQpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHRvSXRlbTogZnVuY3Rpb24gdG9JdGVtKGtleSkgewogICAgICB3aW5kb3cub3BlbigiaHR0cHM6Ly93ZWItYXItY2hhbmdlLWFyLXBhZ2UuZmlyZWJhc2VhcHAuY29tLz9xPSIuY29uY2F0KGtleSksICJfYmxhbmsiKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldEFyRGF0YSgpOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBzZWxmLnNldERvbSgpOwogICAgfSwgMTAwMCk7IC8vIHRoaXMuJG5leHRUaWNrKCgpID0+IHt9KTsKICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"list\">\n    <h2>リスト</h2>\n    <div v-for=\"(item, i) in arData\" :key=\"i\" class=\"list-data\" :id=\"'data-'+i\">\n      <div class=\"list-title\">\n        <h3>{{item.title}}</h3>\n        <img :src=\"external\" @click=\"toItem(item.key)\" />\n      </div>\n      <span>\n        <div class=\"list-a-frame\"></div>\n        <img v-if=\"item.original\" :src=\"item.marker\" id=\"marker\" />\n        <img v-else :src=\"hiro\" id=\"marker\" />\n        <img :src=\"item.qr\" id=\"qr\" />\n      </span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport firebase from \"firebase\";\n\nexport default {\n  data() {\n    return {\n      deleteAR: undefined,\n      arData: new Array(),\n      hiro: require(\"@/assets/img/HIRO.jpg\"),\n      external: require(\"@/assets/svg/external-link-symbol.svg\")\n    };\n  },\n  components: {},\n  methods: {\n    getArData() {\n      var self = this;\n      return firebase\n        .database()\n        .ref(\"/data\")\n        .once(\"value\")\n        .then(function(snapshot) {\n          var res = snapshot.val();\n\n          for (let i in res) {\n            self.arData.push({\n              key: i,\n              title: res[i].title,\n              marker: res[i].marker,\n              qr: res[i].qr,\n              model: res[i].model,\n              original: res[i].original\n            });\n          }\n          console.log(self.arData);\n          // 逆順にする\n          self.arData = self.arData.reverse();\n        });\n    },\n    htmlToNode(htmlStr) {\n      if (!htmlStr || typeof htmlStr !== \"string\") return;\n\n      var tmpElmt = document.createElement(\"div\"),\n        i = 0,\n        len = 0,\n        nodes = [];\n\n      // 高速処理するが対応ブラウザを考えinnerHTMLを使用\n      tmpElmt.innerHTML = htmlStr; // tmpElmt.insertAdjacentHTML('beforeend', htmlStr);\n\n      return tmpElmt.childNodes;\n    },\n    setDom() {\n      // console.log(\"set\");\n\n      var arData = this.arData;\n\n      for (let i in arData) {\n        var title = arData[i].title;\n        var model = arData[i].model;\n        var marker = arData[i].marker;\n        var qr = arData[i].qr;\n\n        // get div\n        var div = document.getElementById(`data-${i}`);\n        // console.log(div);\n\n        // get span\n        if (div) {\n          var span = div.getElementsByTagName(\"span\")[0];\n          // console.log(span);\n          // get list-a-frame\n          var listAFrame = span.getElementsByClassName(\"list-a-frame\")[0];\n          // console.log(listAFrame);\n\n          // create a-scene\n          // <a-scene embedded></a-scene>;\n          var ascene = document.createElement(\"a-scene\");\n          ascene.setAttribute(\"embedded\", \"\");\n\n          // set model to a-scene\n          // <a-scene embedded>\n          //   <model></model>\n          // </a-scene>;\n          if (model) {\n            for (let j in model) {\n              var modelChild = this.htmlToNode(model[j]);\n              if (modelChild) ascene.appendChild(modelChild[0]);\n            }\n            // console.log(\"set model to a-scene\");\n            // console.log(ascene);\n          }\n          // set human camera to a-scene\n          // <a-scene embedded>\n          //   <model></model>\n          //   <a-entity camera></a-entity>\n          // </a-scene>;\n          var camera = document.createElement(\"a-entity\");\n          camera.setAttribute(\"camera\", \"\");\n          camera.setAttribute(\"look-controls\", \"\");\n          camera.setAttribute(\"position\", \"1 1.5 3\");\n          ascene.appendChild(camera);\n\n          // set ascene to list-a-frame\n          //     <div class=\"list-a-frame\">\n          //       <a-scene embedded>\n          //         <model></model>\n          //       </a-scene>\n          //     </div>\n          listAFrame.insertBefore(ascene, listAFrame.firstChild);\n        }\n      }\n    },\n    toItem(key) {\n      window.open(\n        `https://web-ar-change-ar-page.firebaseapp.com/?q=${key}`,\n        \"_blank\"\n      );\n    }\n  },\n  created() {\n    this.getArData();\n  },\n  mounted() {\n    var self = this;\n    setTimeout(function() {\n      self.setDom();\n    }, 1000);\n    // this.$nextTick(() => {});\n  }\n};\n</script>\n\n<style lang=\"scss\">\n#list {\n  .list-data {\n    margin: 0 0 15px 0;\n    padding: 0 10px 30px 10px;\n    border-bottom: 1px solid #c3c3c3;\n\n    .list-title {\n      margin-bottom: 10px;\n      display: flex;\n\n      h3 {\n        margin: 0;\n      }\n\n      img {\n        height: 16px;\n        margin: auto auto auto 10px;\n        cursor: pointer;\n\n        &:hover {\n          transform: scale(1.2);\n          transition: 0.3s;\n        }\n      }\n    }\n\n    span {\n      display: flex;\n\n      * {\n        margin: auto;\n      }\n\n      .list-a-frame {\n        height: 300px;\n        width: 300px;\n        background: #c3c3c3;\n      }\n\n      img {\n        width: 200px;\n      }\n    }\n  }\n\n  a-scene {\n    display: block;\n    width: 300px;\n    height: 300px;\n    background: #c3c3c3;\n  }\n}\n</style>\n\n"],"sourceRoot":"src/views/list"}]}