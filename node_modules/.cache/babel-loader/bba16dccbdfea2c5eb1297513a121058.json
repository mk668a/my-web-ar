{"remainingRequest":"/Users/mk/Desktop/git/my-web-ar/node_modules/babel-loader/lib/index.js!/Users/mk/Desktop/git/my-web-ar/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mk/Desktop/git/my-web-ar/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mk/Desktop/git/my-web-ar/src/views/list/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mk/Desktop/git/my-web-ar/src/views/list/index.vue","mtime":1575261825948},{"path":"/Users/mk/Desktop/git/my-web-ar/node_modules/cache-loader/dist/cjs.js","mtime":1575261812576},{"path":"/Users/mk/Desktop/git/my-web-ar/node_modules/babel-loader/lib/index.js","mtime":1575261810540},{"path":"/Users/mk/Desktop/git/my-web-ar/node_modules/cache-loader/dist/cjs.js","mtime":1575261812576},{"path":"/Users/mk/Desktop/git/my-web-ar/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGZpcmViYXNlIGZyb20gImZpcmViYXNlIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkZWxldGVBUjogdW5kZWZpbmVkLAogICAgICBhckRhdGE6IG5ldyBBcnJheSgpLAogICAgICBoaXJvOiByZXF1aXJlKCJAL2Fzc2V0cy9pbWcvSElSTy5qcGciKSwKICAgICAgZXh0ZXJuYWw6IHJlcXVpcmUoIkAvYXNzZXRzL3N2Zy9leHRlcm5hbC1saW5rLXN5bWJvbC5zdmciKQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHt9LAogIG1ldGhvZHM6IHsKICAgIGdldEFyRGF0YTogZnVuY3Rpb24gZ2V0QXJEYXRhKCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHJldHVybiBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiL2RhdGEiKS5vbmNlKCJ2YWx1ZSIpLnRoZW4oZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgdmFyIHJlcyA9IHNuYXBzaG90LnZhbCgpOwoKICAgICAgICBmb3IgKHZhciBpIGluIHJlcykgewogICAgICAgICAgc2VsZi5hckRhdGEucHVzaCh7CiAgICAgICAgICAgIGtleTogaSwKICAgICAgICAgICAgdGl0bGU6IHJlc1tpXS50aXRsZSwKICAgICAgICAgICAgbWFya2VyOiByZXNbaV0ubWFya2VyLAogICAgICAgICAgICBxcjogcmVzW2ldLnFyLAogICAgICAgICAgICBtb2RlbDogcmVzW2ldLm1vZGVsLAogICAgICAgICAgICBvcmlnaW5hbDogcmVzW2ldLm9yaWdpbmFsCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGNvbnNvbGUubG9nKHNlbGYuYXJEYXRhKTsgLy8g6YCG6aCG44Gr44GZ44KLCgogICAgICAgIHNlbGYuYXJEYXRhID0gc2VsZi5hckRhdGEucmV2ZXJzZSgpOwogICAgICB9KTsKICAgIH0sCiAgICBodG1sVG9Ob2RlOiBmdW5jdGlvbiBodG1sVG9Ob2RlKGh0bWxTdHIpIHsKICAgICAgaWYgKCFodG1sU3RyIHx8IHR5cGVvZiBodG1sU3RyICE9PSAic3RyaW5nIikgcmV0dXJuOwogICAgICB2YXIgdG1wRWxtdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLAogICAgICAgICAgaSA9IDAsCiAgICAgICAgICBsZW4gPSAwLAogICAgICAgICAgbm9kZXMgPSBbXTsgLy8g6auY6YCf5Yem55CG44GZ44KL44GM5a++5b+c44OW44Op44Km44K244KS6ICD44GIaW5uZXJIVE1M44KS5L2/55SoCgogICAgICB0bXBFbG10LmlubmVySFRNTCA9IGh0bWxTdHI7IC8vIHRtcEVsbXQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBodG1sU3RyKTsKCiAgICAgIHJldHVybiB0bXBFbG10LmNoaWxkTm9kZXM7CiAgICB9LAogICAgc2V0RG9tOiBmdW5jdGlvbiBzZXREb20oKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJzZXQiKTsKICAgICAgdmFyIGFyRGF0YSA9IHRoaXMuYXJEYXRhOwoKICAgICAgZm9yICh2YXIgaSBpbiBhckRhdGEpIHsKICAgICAgICB2YXIgdGl0bGUgPSBhckRhdGFbaV0udGl0bGU7CiAgICAgICAgdmFyIG1vZGVsID0gYXJEYXRhW2ldLm1vZGVsOwogICAgICAgIHZhciBtYXJrZXIgPSBhckRhdGFbaV0ubWFya2VyOwogICAgICAgIHZhciBxciA9IGFyRGF0YVtpXS5xcjsgLy8gZ2V0IGRpdgoKICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRhdGEtIi5jb25jYXQoaSkpOyAvLyBjb25zb2xlLmxvZyhkaXYpOwogICAgICAgIC8vIGdldCBzcGFuCgogICAgICAgIGlmIChkaXYpIHsKICAgICAgICAgIHZhciBzcGFuID0gZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzcGFuIilbMF07IC8vIGNvbnNvbGUubG9nKHNwYW4pOwogICAgICAgICAgLy8gZ2V0IGxpc3QtYS1mcmFtZQoKICAgICAgICAgIHZhciBsaXN0QUZyYW1lID0gc3Bhbi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJsaXN0LWEtZnJhbWUiKVswXTsgLy8gY29uc29sZS5sb2cobGlzdEFGcmFtZSk7CiAgICAgICAgICAvLyBjcmVhdGUgYS1zY2VuZQogICAgICAgICAgLy8gPGEtc2NlbmUgZW1iZWRkZWQ+PC9hLXNjZW5lPjsKCiAgICAgICAgICB2YXIgYXNjZW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYS1zY2VuZSIpOwogICAgICAgICAgYXNjZW5lLnNldEF0dHJpYnV0ZSgiZW1iZWRkZWQiLCAiIik7IC8vIHNldCBtb2RlbCB0byBhLXNjZW5lCiAgICAgICAgICAvLyA8YS1zY2VuZSBlbWJlZGRlZD4KICAgICAgICAgIC8vICAgPG1vZGVsPjwvbW9kZWw+CiAgICAgICAgICAvLyA8L2Etc2NlbmU+OwoKICAgICAgICAgIGlmIChtb2RlbCkgewogICAgICAgICAgICBmb3IgKHZhciBqIGluIG1vZGVsKSB7CiAgICAgICAgICAgICAgdmFyIG1vZGVsQ2hpbGQgPSB0aGlzLmh0bWxUb05vZGUobW9kZWxbal0pOwogICAgICAgICAgICAgIGlmIChtb2RlbENoaWxkKSBhc2NlbmUuYXBwZW5kQ2hpbGQobW9kZWxDaGlsZFswXSk7CiAgICAgICAgICAgIH0gLy8gY29uc29sZS5sb2coInNldCBtb2RlbCB0byBhLXNjZW5lIik7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGFzY2VuZSk7CgogICAgICAgICAgfSAvLyBzZXQgaHVtYW4gY2FtZXJhIHRvIGEtc2NlbmUKICAgICAgICAgIC8vIDxhLXNjZW5lIGVtYmVkZGVkPgogICAgICAgICAgLy8gICA8bW9kZWw+PC9tb2RlbD4KICAgICAgICAgIC8vICAgPGEtZW50aXR5IGNhbWVyYT48L2EtZW50aXR5PgogICAgICAgICAgLy8gPC9hLXNjZW5lPjsKCgogICAgICAgICAgdmFyIGNhbWVyYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEtZW50aXR5Iik7CiAgICAgICAgICBjYW1lcmEuc2V0QXR0cmlidXRlKCJjYW1lcmEiLCAiIik7CiAgICAgICAgICBjYW1lcmEuc2V0QXR0cmlidXRlKCJsb29rLWNvbnRyb2xzIiwgIiIpOwogICAgICAgICAgY2FtZXJhLnNldEF0dHJpYnV0ZSgicG9zaXRpb24iLCAiMSAxLjUgMyIpOwogICAgICAgICAgYXNjZW5lLmFwcGVuZENoaWxkKGNhbWVyYSk7IC8vIHNldCBhc2NlbmUgdG8gbGlzdC1hLWZyYW1lCiAgICAgICAgICAvLyAgICAgPGRpdiBjbGFzcz0ibGlzdC1hLWZyYW1lIj4KICAgICAgICAgIC8vICAgICAgIDxhLXNjZW5lIGVtYmVkZGVkPgogICAgICAgICAgLy8gICAgICAgICA8bW9kZWw+PC9tb2RlbD4KICAgICAgICAgIC8vICAgICAgIDwvYS1zY2VuZT4KICAgICAgICAgIC8vICAgICA8L2Rpdj4KCiAgICAgICAgICBsaXN0QUZyYW1lLmluc2VydEJlZm9yZShhc2NlbmUsIGxpc3RBRnJhbWUuZmlyc3RDaGlsZCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgdG9JdGVtOiBmdW5jdGlvbiB0b0l0ZW0oa2V5KSB7CiAgICAgIHdpbmRvdy5vcGVuKCJodHRwczovL3dlYi1hci1jaGFuZ2UtYXItcGFnZS5maXJlYmFzZWFwcC5jb20vP3E9Ii5jb25jYXQoa2V5KSwgIl9ibGFuayIpOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0QXJEYXRhKCk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIHNlbGYuc2V0RG9tKCk7CiAgICB9LCAxMDAwKTsgLy8gdGhpcy4kbmV4dFRpY2soKCkgPT4ge30pOwogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"list\">\n    <h2>リスト</h2>\n    <div v-for=\"(item, i) in arData\" :key=\"i\" :id=\"'data-'+i\" class=\"list-data\">\n      <div class=\"list-title\">\n        <h3>{{item.title}}</h3>\n        <img :src=\"external\" @click=\"toItem(item.key)\" />\n      </div>\n      <span>\n        <div class=\"list-a-frame\">\n          <a-scene v-html=\"item.model\" embedded>\n            <a-entity camera look-controls position></a-entity>\n          </a-scene>\n        </div>\n        <img v-if=\"item.original\" :src=\"item.marker\" id=\"marker\" />\n        <img v-else :src=\"hiro\" id=\"marker\" />\n        <img :src=\"item.qr\" id=\"qr\" />\n      </span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport firebase from \"firebase\";\n\nexport default {\n  data() {\n    return {\n      deleteAR: undefined,\n      arData: new Array(),\n      hiro: require(\"@/assets/img/HIRO.jpg\"),\n      external: require(\"@/assets/svg/external-link-symbol.svg\")\n    };\n  },\n  components: {},\n  methods: {\n    getArData() {\n      var self = this;\n      return firebase\n        .database()\n        .ref(\"/data\")\n        .once(\"value\")\n        .then(function(snapshot) {\n          var res = snapshot.val();\n\n          for (let i in res) {\n            self.arData.push({\n              key: i,\n              title: res[i].title,\n              marker: res[i].marker,\n              qr: res[i].qr,\n              model: res[i].model,\n              original: res[i].original\n            });\n          }\n          console.log(self.arData);\n          // 逆順にする\n          self.arData = self.arData.reverse();\n        });\n    },\n    htmlToNode(htmlStr) {\n      if (!htmlStr || typeof htmlStr !== \"string\") return;\n\n      var tmpElmt = document.createElement(\"div\"),\n        i = 0,\n        len = 0,\n        nodes = [];\n\n      // 高速処理するが対応ブラウザを考えinnerHTMLを使用\n      tmpElmt.innerHTML = htmlStr; // tmpElmt.insertAdjacentHTML('beforeend', htmlStr);\n\n      return tmpElmt.childNodes;\n    },\n    setDom() {\n      // console.log(\"set\");\n\n      var arData = this.arData;\n\n      for (let i in arData) {\n        var title = arData[i].title;\n        var model = arData[i].model;\n        var marker = arData[i].marker;\n        var qr = arData[i].qr;\n\n        // get div\n        var div = document.getElementById(`data-${i}`);\n        // console.log(div);\n\n        // get span\n        if (div) {\n          var span = div.getElementsByTagName(\"span\")[0];\n          // console.log(span);\n          // get list-a-frame\n          var listAFrame = span.getElementsByClassName(\"list-a-frame\")[0];\n          // console.log(listAFrame);\n\n          // create a-scene\n          // <a-scene embedded></a-scene>;\n          var ascene = document.createElement(\"a-scene\");\n          ascene.setAttribute(\"embedded\", \"\");\n\n          // set model to a-scene\n          // <a-scene embedded>\n          //   <model></model>\n          // </a-scene>;\n          if (model) {\n            for (let j in model) {\n              var modelChild = this.htmlToNode(model[j]);\n              if (modelChild) ascene.appendChild(modelChild[0]);\n            }\n            // console.log(\"set model to a-scene\");\n            // console.log(ascene);\n          }\n          // set human camera to a-scene\n          // <a-scene embedded>\n          //   <model></model>\n          //   <a-entity camera></a-entity>\n          // </a-scene>;\n          var camera = document.createElement(\"a-entity\");\n          camera.setAttribute(\"camera\", \"\");\n          camera.setAttribute(\"look-controls\", \"\");\n          camera.setAttribute(\"position\", \"1 1.5 3\");\n          ascene.appendChild(camera);\n\n          // set ascene to list-a-frame\n          //     <div class=\"list-a-frame\">\n          //       <a-scene embedded>\n          //         <model></model>\n          //       </a-scene>\n          //     </div>\n          listAFrame.insertBefore(ascene, listAFrame.firstChild);\n        }\n      }\n    },\n    toItem(key) {\n      window.open(\n        `https://web-ar-change-ar-page.firebaseapp.com/?q=${key}`,\n        \"_blank\"\n      );\n    }\n  },\n  created() {\n    this.getArData();\n  },\n  mounted() {\n    var self = this;\n    setTimeout(function() {\n      self.setDom();\n    }, 1000);\n    // this.$nextTick(() => {});\n  }\n};\n</script>\n\n<style lang=\"scss\">\n#list {\n  .list-data {\n    margin: 0 0 15px 0;\n    padding: 0 10px 30px 10px;\n    border-bottom: 1px solid #c3c3c3;\n\n    .list-title {\n      margin-bottom: 10px;\n      display: flex;\n\n      h3 {\n        margin: 0;\n      }\n\n      img {\n        height: 16px;\n        margin: auto auto auto 10px;\n        cursor: pointer;\n\n        &:hover {\n          transform: scale(1.2);\n          transition: 0.3s;\n        }\n      }\n    }\n\n    span {\n      display: flex;\n\n      * {\n        margin: auto;\n      }\n\n      .list-a-frame {\n        height: 300px;\n        width: 300px;\n        background: #c3c3c3;\n      }\n\n      img {\n        width: 200px;\n      }\n    }\n  }\n\n  a-scene {\n    display: block;\n    width: 300px;\n    height: 300px;\n    background: #c3c3c3;\n  }\n}\n</style>\n\n"],"sourceRoot":"src/views/list"}]}