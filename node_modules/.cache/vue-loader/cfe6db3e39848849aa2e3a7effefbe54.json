{"remainingRequest":"/Users/mk/Desktop/git/my-web-ar/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mk/Desktop/git/my-web-ar/src/views/list/index.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/mk/Desktop/git/my-web-ar/src/views/list/index.vue","mtime":1575261825948},{"path":"/Users/mk/Desktop/git/my-web-ar/node_modules/css-loader/dist/cjs.js","mtime":1575261815245},{"path":"/Users/mk/Desktop/git/my-web-ar/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1575261824991},{"path":"/Users/mk/Desktop/git/my-web-ar/node_modules/postcss-loader/src/index.js","mtime":1575261821992},{"path":"/Users/mk/Desktop/git/my-web-ar/node_modules/sass-loader/dist/cjs.js","mtime":1575261823243},{"path":"/Users/mk/Desktop/git/my-web-ar/node_modules/cache-loader/dist/cjs.js","mtime":1575261812576},{"path":"/Users/mk/Desktop/git/my-web-ar/node_modules/vue-loader/lib/index.js","mtime":1575261824991}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojbGlzdCB7CiAgLmxpc3QtZGF0YSB7CiAgICBtYXJnaW46IDAgMCAxNXB4IDA7CiAgICBwYWRkaW5nOiAwIDEwcHggMzBweCAxMHB4OwogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNjM2MzYzM7CgogICAgLmxpc3QtdGl0bGUgewogICAgICBtYXJnaW4tYm90dG9tOiAxMHB4OwogICAgICBkaXNwbGF5OiBmbGV4OwoKICAgICAgaDMgewogICAgICAgIG1hcmdpbjogMDsKICAgICAgfQoKICAgICAgaW1nIHsKICAgICAgICBoZWlnaHQ6IDE2cHg7CiAgICAgICAgbWFyZ2luOiBhdXRvIGF1dG8gYXV0byAxMHB4OwogICAgICAgIGN1cnNvcjogcG9pbnRlcjsKCiAgICAgICAgJjpob3ZlciB7CiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMik7CiAgICAgICAgICB0cmFuc2l0aW9uOiAwLjNzOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHNwYW4gewogICAgICBkaXNwbGF5OiBmbGV4OwoKICAgICAgKiB7CiAgICAgICAgbWFyZ2luOiBhdXRvOwogICAgICB9CgogICAgICAubGlzdC1hLWZyYW1lIHsKICAgICAgICBoZWlnaHQ6IDMwMHB4OwogICAgICAgIHdpZHRoOiAzMDBweDsKICAgICAgICBiYWNrZ3JvdW5kOiAjYzNjM2MzOwogICAgICB9CgogICAgICBpbWcgewogICAgICAgIHdpZHRoOiAyMDBweDsKICAgICAgfQogICAgfQogIH0KCiAgYS1zY2VuZSB7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIHdpZHRoOiAzMDBweDsKICAgIGhlaWdodDogMzAwcHg7CiAgICBiYWNrZ3JvdW5kOiAjYzNjM2MzOwogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2JA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/list","sourcesContent":["<template>\n  <div id=\"list\">\n    <h2>リスト</h2>\n    <div v-for=\"(item, i) in arData\" :key=\"i\" :id=\"'data-'+i\" class=\"list-data\">\n      <div class=\"list-title\">\n        <h3>{{item.title}}</h3>\n        <img :src=\"external\" @click=\"toItem(item.key)\" />\n      </div>\n      <span>\n        <div class=\"list-a-frame\">\n          <a-scene v-html=\"item.model\" embedded>\n            <a-entity camera look-controls position></a-entity>\n          </a-scene>\n        </div>\n        <img v-if=\"item.original\" :src=\"item.marker\" id=\"marker\" />\n        <img v-else :src=\"hiro\" id=\"marker\" />\n        <img :src=\"item.qr\" id=\"qr\" />\n      </span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport firebase from \"firebase\";\n\nexport default {\n  data() {\n    return {\n      deleteAR: undefined,\n      arData: new Array(),\n      hiro: require(\"@/assets/img/HIRO.jpg\"),\n      external: require(\"@/assets/svg/external-link-symbol.svg\")\n    };\n  },\n  components: {},\n  methods: {\n    getArData() {\n      var self = this;\n      return firebase\n        .database()\n        .ref(\"/data\")\n        .once(\"value\")\n        .then(function(snapshot) {\n          var res = snapshot.val();\n\n          for (let i in res) {\n            self.arData.push({\n              key: i,\n              title: res[i].title,\n              marker: res[i].marker,\n              qr: res[i].qr,\n              model: res[i].model,\n              original: res[i].original\n            });\n          }\n          console.log(self.arData);\n          // 逆順にする\n          self.arData = self.arData.reverse();\n        });\n    },\n    htmlToNode(htmlStr) {\n      if (!htmlStr || typeof htmlStr !== \"string\") return;\n\n      var tmpElmt = document.createElement(\"div\"),\n        i = 0,\n        len = 0,\n        nodes = [];\n\n      // 高速処理するが対応ブラウザを考えinnerHTMLを使用\n      tmpElmt.innerHTML = htmlStr; // tmpElmt.insertAdjacentHTML('beforeend', htmlStr);\n\n      return tmpElmt.childNodes;\n    },\n    setDom() {\n      // console.log(\"set\");\n\n      var arData = this.arData;\n\n      for (let i in arData) {\n        var title = arData[i].title;\n        var model = arData[i].model;\n        var marker = arData[i].marker;\n        var qr = arData[i].qr;\n\n        // get div\n        var div = document.getElementById(`data-${i}`);\n        // console.log(div);\n\n        // get span\n        if (div) {\n          var span = div.getElementsByTagName(\"span\")[0];\n          // console.log(span);\n          // get list-a-frame\n          var listAFrame = span.getElementsByClassName(\"list-a-frame\")[0];\n          // console.log(listAFrame);\n\n          // create a-scene\n          // <a-scene embedded></a-scene>;\n          var ascene = document.createElement(\"a-scene\");\n          ascene.setAttribute(\"embedded\", \"\");\n\n          // set model to a-scene\n          // <a-scene embedded>\n          //   <model></model>\n          // </a-scene>;\n          if (model) {\n            for (let j in model) {\n              var modelChild = this.htmlToNode(model[j]);\n              if (modelChild) ascene.appendChild(modelChild[0]);\n            }\n            // console.log(\"set model to a-scene\");\n            // console.log(ascene);\n          }\n          // set human camera to a-scene\n          // <a-scene embedded>\n          //   <model></model>\n          //   <a-entity camera></a-entity>\n          // </a-scene>;\n          var camera = document.createElement(\"a-entity\");\n          camera.setAttribute(\"camera\", \"\");\n          camera.setAttribute(\"look-controls\", \"\");\n          camera.setAttribute(\"position\", \"1 1.5 3\");\n          ascene.appendChild(camera);\n\n          // set ascene to list-a-frame\n          //     <div class=\"list-a-frame\">\n          //       <a-scene embedded>\n          //         <model></model>\n          //       </a-scene>\n          //     </div>\n          listAFrame.insertBefore(ascene, listAFrame.firstChild);\n        }\n      }\n    },\n    toItem(key) {\n      window.open(\n        `https://web-ar-change-ar-page.firebaseapp.com/?q=${key}`,\n        \"_blank\"\n      );\n    }\n  },\n  created() {\n    this.getArData();\n  },\n  mounted() {\n    var self = this;\n    setTimeout(function() {\n      self.setDom();\n    }, 1000);\n    // this.$nextTick(() => {});\n  }\n};\n</script>\n\n<style lang=\"scss\">\n#list {\n  .list-data {\n    margin: 0 0 15px 0;\n    padding: 0 10px 30px 10px;\n    border-bottom: 1px solid #c3c3c3;\n\n    .list-title {\n      margin-bottom: 10px;\n      display: flex;\n\n      h3 {\n        margin: 0;\n      }\n\n      img {\n        height: 16px;\n        margin: auto auto auto 10px;\n        cursor: pointer;\n\n        &:hover {\n          transform: scale(1.2);\n          transition: 0.3s;\n        }\n      }\n    }\n\n    span {\n      display: flex;\n\n      * {\n        margin: auto;\n      }\n\n      .list-a-frame {\n        height: 300px;\n        width: 300px;\n        background: #c3c3c3;\n      }\n\n      img {\n        width: 200px;\n      }\n    }\n  }\n\n  a-scene {\n    display: block;\n    width: 300px;\n    height: 300px;\n    background: #c3c3c3;\n  }\n}\n</style>\n\n"]}]}