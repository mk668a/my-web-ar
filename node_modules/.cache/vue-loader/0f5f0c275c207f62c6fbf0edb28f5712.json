{"remainingRequest":"/Users/mk/Desktop/webar/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mk/Desktop/webar/src/views/list/index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/mk/Desktop/webar/src/views/list/index.vue","mtime":1574694790615},{"path":"/Users/mk/Desktop/webar/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mk/Desktop/webar/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IGZpcmViYXNlIGZyb20gIn4vcGx1Z2lucy9maXJlYmFzZSI7CgpleHBvcnQgZGVmYXVsdCBWdWUuZXh0ZW5kKHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGVsZXRlQVI6IHVuZGVmaW5lZCwKICAgICAgYXJEYXRhOiBuZXcgQXJyYXkoKSwKICAgICAgaGlybzogcmVxdWlyZSgiQC9hc3NldHMvaW1nL0hJUk8uanBnIiksCiAgICAgIGV4dGVybmFsOiByZXF1aXJlKCJAL2Fzc2V0cy9zdmcvZXh0ZXJuYWwtbGluay1zeW1ib2wuc3ZnIikKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7fSwKICBtZXRob2RzOiB7CiAgICBnZXRBckRhdGEoKSB7CiAgICAgIHZhciBzZWxmOiBhbnkgPSB0aGlzOwogICAgICByZXR1cm4gZmlyZWJhc2UKICAgICAgICAuZGF0YWJhc2UoKQogICAgICAgIC5yZWYoIi9kYXRhIikKICAgICAgICAub25jZSgidmFsdWUiKQogICAgICAgIC50aGVuKGZ1bmN0aW9uKHNuYXBzaG90KSB7CiAgICAgICAgICB2YXIgcmVzOiBhbnkgPSBzbmFwc2hvdC52YWwoKTsKCiAgICAgICAgICBmb3IgKGxldCBpIGluIHJlcykgewogICAgICAgICAgICBzZWxmLmFyRGF0YS5wdXNoKHsKICAgICAgICAgICAgICBrZXk6IGksCiAgICAgICAgICAgICAgdGl0bGU6IHJlc1tpXS50aXRsZSwKICAgICAgICAgICAgICBtYXJrZXI6IHJlc1tpXS5tYXJrZXIsCiAgICAgICAgICAgICAgcXI6IHJlc1tpXS5xciwKICAgICAgICAgICAgICBtb2RlbDogcmVzW2ldLm1vZGVsLAogICAgICAgICAgICAgIG9yaWdpbmFsOiByZXNbaV0ub3JpZ2luYWwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zb2xlLmxvZyhzZWxmLmFyRGF0YSk7CiAgICAgICAgICAvLyDpgIbpoIbjgavjgZnjgosKICAgICAgICAgIHNlbGYuYXJEYXRhID0gc2VsZi5hckRhdGEucmV2ZXJzZSgpOwogICAgICAgIH0pOwogICAgfSwKICAgIGh0bWxUb05vZGUoaHRtbFN0cjogc3RyaW5nIHwgbnVsbCkgewogICAgICBpZiAoIWh0bWxTdHIgfHwgdHlwZW9mIGh0bWxTdHIgIT09ICJzdHJpbmciKSByZXR1cm47CgogICAgICB2YXIgdG1wRWxtdDogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSwKICAgICAgICBpID0gMCwKICAgICAgICBsZW4gPSAwLAogICAgICAgIG5vZGVzID0gW107CgogICAgICAvLyDpq5jpgJ/lh6bnkIbjgZnjgovjgYzlr77lv5zjg5bjg6njgqbjgrbjgpLogIPjgYhpbm5lckhUTUzjgpLkvb/nlKgKICAgICAgdG1wRWxtdC5pbm5lckhUTUwgPSBodG1sU3RyOyAvLyB0bXBFbG10Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgaHRtbFN0cik7CgogICAgICByZXR1cm4gdG1wRWxtdC5jaGlsZE5vZGVzOwogICAgfSwKICAgIHNldERvbSgpIHsKICAgICAgLy8gY29uc29sZS5sb2coInNldCIpOwoKICAgICAgdmFyIGFyRGF0YTogYW55W10gPSB0aGlzLmFyRGF0YTsKCiAgICAgIGZvciAobGV0IGkgaW4gYXJEYXRhKSB7CiAgICAgICAgdmFyIHRpdGxlOiBzdHJpbmcgPSBhckRhdGFbaV0udGl0bGU7CiAgICAgICAgdmFyIG1vZGVsOiBhbnkgPSBhckRhdGFbaV0ubW9kZWw7CiAgICAgICAgdmFyIG1hcmtlcjogc3RyaW5nID0gYXJEYXRhW2ldLm1hcmtlcjsKICAgICAgICB2YXIgcXI6IHN0cmluZyA9IGFyRGF0YVtpXS5xcjsKCiAgICAgICAgLy8gZ2V0IGRpdgogICAgICAgIHZhciBkaXY6IEhUTUxFbGVtZW50IHwgbnVsbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBkYXRhLSR7aX1gKTsKICAgICAgICAvLyBjb25zb2xlLmxvZyhkaXYpOwoKICAgICAgICAvLyBnZXQgc3BhbgogICAgICAgIGlmIChkaXYpIHsKICAgICAgICAgIHZhciBzcGFuOiBIVE1MU3BhbkVsZW1lbnQgPSBkaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNwYW4iKVswXTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNwYW4pOwogICAgICAgICAgLy8gZ2V0IGxpc3QtYS1mcmFtZQogICAgICAgICAgdmFyIGxpc3RBRnJhbWU6IEVsZW1lbnQgPSBzcGFuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoCiAgICAgICAgICAgICJsaXN0LWEtZnJhbWUiCiAgICAgICAgICApWzBdOwogICAgICAgICAgLy8gY29uc29sZS5sb2cobGlzdEFGcmFtZSk7CgogICAgICAgICAgLy8gY3JlYXRlIGEtc2NlbmUKICAgICAgICAgIC8vIDxhLXNjZW5lIGVtYmVkZGVkPjwvYS1zY2VuZT47CiAgICAgICAgICB2YXIgYXNjZW5lOiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEtc2NlbmUiKTsKICAgICAgICAgIGFzY2VuZS5zZXRBdHRyaWJ1dGUoImVtYmVkZGVkIiwgIiIpOwoKICAgICAgICAgIC8vIHNldCBtb2RlbCB0byBhLXNjZW5lCiAgICAgICAgICAvLyA8YS1zY2VuZSBlbWJlZGRlZD4KICAgICAgICAgIC8vICAgPG1vZGVsPjwvbW9kZWw+CiAgICAgICAgICAvLyA8L2Etc2NlbmU+OwogICAgICAgICAgaWYgKG1vZGVsKSB7CiAgICAgICAgICAgIGZvciAobGV0IGogaW4gbW9kZWwpIHsKICAgICAgICAgICAgICB2YXIgbW9kZWxDaGlsZDoKICAgICAgICAgICAgICAgIHwgTm9kZUxpc3RPZjxDaGlsZE5vZGU+CiAgICAgICAgICAgICAgICB8IHVuZGVmaW5lZCA9IHRoaXMuaHRtbFRvTm9kZShtb2RlbFtqXSk7CiAgICAgICAgICAgICAgaWYgKG1vZGVsQ2hpbGQpIGFzY2VuZS5hcHBlbmRDaGlsZChtb2RlbENoaWxkWzBdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygic2V0IG1vZGVsIHRvIGEtc2NlbmUiKTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYXNjZW5lKTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIHNldCBodW1hbiBjYW1lcmEgdG8gYS1zY2VuZQogICAgICAgICAgLy8gPGEtc2NlbmUgZW1iZWRkZWQ+CiAgICAgICAgICAvLyAgIDxtb2RlbD48L21vZGVsPgogICAgICAgICAgLy8gICA8YS1lbnRpdHkgY2FtZXJhPjwvYS1lbnRpdHk+CiAgICAgICAgICAvLyA8L2Etc2NlbmU+OwogICAgICAgICAgdmFyIGNhbWVyYTogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhLWVudGl0eSIpOwogICAgICAgICAgY2FtZXJhLnNldEF0dHJpYnV0ZSgiY2FtZXJhIiwgIiIpOwogICAgICAgICAgY2FtZXJhLnNldEF0dHJpYnV0ZSgibG9vay1jb250cm9scyIsICIiKTsKICAgICAgICAgIGNhbWVyYS5zZXRBdHRyaWJ1dGUoInBvc2l0aW9uIiwgIjEgMS41IDMiKTsKICAgICAgICAgIGFzY2VuZS5hcHBlbmRDaGlsZChjYW1lcmEpOwoKICAgICAgICAgIC8vIHNldCBhc2NlbmUgdG8gbGlzdC1hLWZyYW1lCiAgICAgICAgICAvLyAgICAgPGRpdiBjbGFzcz0ibGlzdC1hLWZyYW1lIj4KICAgICAgICAgIC8vICAgICAgIDxhLXNjZW5lIGVtYmVkZGVkPgogICAgICAgICAgLy8gICAgICAgICA8bW9kZWw+PC9tb2RlbD4KICAgICAgICAgIC8vICAgICAgIDwvYS1zY2VuZT4KICAgICAgICAgIC8vICAgICA8L2Rpdj4KICAgICAgICAgIGxpc3RBRnJhbWUuaW5zZXJ0QmVmb3JlKGFzY2VuZSwgbGlzdEFGcmFtZS5maXJzdENoaWxkKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICB0b0l0ZW0oa2V5OiBzdHJpbmcpIHsKICAgICAgd2luZG93Lm9wZW4oCiAgICAgICAgYGh0dHBzOi8vd2ViLWFyLWNoYW5nZS1hci1wYWdlLmZpcmViYXNlYXBwLmNvbS8/cT0ke2tleX1gLAogICAgICAgICJfYmxhbmsiCiAgICAgICk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgLy8gdGhpcy5nZXRBckRhdGEoKTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICBzZWxmLnNldERvbSgpOwogICAgfSwgMTAwMCk7CiAgICAvLyB0aGlzLiRuZXh0VGljaygoKSA9PiB7fSk7CiAgfQp9KTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/list","sourcesContent":["<template>\n  <div id=\"list\">\n    <h2>リスト</h2>\n    <div v-for=\"(item, i) in arData\" :key=\"i\" class=\"list-data\" :id=\"'data-'+i\">\n      <div class=\"list-title\">\n        <h3>{{item.title}}</h3>\n        <img :src=\"external\" @click=\"toItem(item.key)\" />\n      </div>\n      <span>\n        <div class=\"list-a-frame\"></div>\n        <img v-if=\"item.original\" :src=\"item.marker\" id=\"marker\" />\n        <img v-else :src=\"hiro\" id=\"marker\" />\n        <img :src=\"item.qr\" id=\"qr\" />\n      </span>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport Vue from \"vue\";\nimport firebase from \"~/plugins/firebase\";\n\nexport default Vue.extend({\n  data() {\n    return {\n      deleteAR: undefined,\n      arData: new Array(),\n      hiro: require(\"@/assets/img/HIRO.jpg\"),\n      external: require(\"@/assets/svg/external-link-symbol.svg\")\n    };\n  },\n  components: {},\n  methods: {\n    getArData() {\n      var self: any = this;\n      return firebase\n        .database()\n        .ref(\"/data\")\n        .once(\"value\")\n        .then(function(snapshot) {\n          var res: any = snapshot.val();\n\n          for (let i in res) {\n            self.arData.push({\n              key: i,\n              title: res[i].title,\n              marker: res[i].marker,\n              qr: res[i].qr,\n              model: res[i].model,\n              original: res[i].original\n            });\n          }\n          console.log(self.arData);\n          // 逆順にする\n          self.arData = self.arData.reverse();\n        });\n    },\n    htmlToNode(htmlStr: string | null) {\n      if (!htmlStr || typeof htmlStr !== \"string\") return;\n\n      var tmpElmt: HTMLDivElement = document.createElement(\"div\"),\n        i = 0,\n        len = 0,\n        nodes = [];\n\n      // 高速処理するが対応ブラウザを考えinnerHTMLを使用\n      tmpElmt.innerHTML = htmlStr; // tmpElmt.insertAdjacentHTML('beforeend', htmlStr);\n\n      return tmpElmt.childNodes;\n    },\n    setDom() {\n      // console.log(\"set\");\n\n      var arData: any[] = this.arData;\n\n      for (let i in arData) {\n        var title: string = arData[i].title;\n        var model: any = arData[i].model;\n        var marker: string = arData[i].marker;\n        var qr: string = arData[i].qr;\n\n        // get div\n        var div: HTMLElement | null = document.getElementById(`data-${i}`);\n        // console.log(div);\n\n        // get span\n        if (div) {\n          var span: HTMLSpanElement = div.getElementsByTagName(\"span\")[0];\n          // console.log(span);\n          // get list-a-frame\n          var listAFrame: Element = span.getElementsByClassName(\n            \"list-a-frame\"\n          )[0];\n          // console.log(listAFrame);\n\n          // create a-scene\n          // <a-scene embedded></a-scene>;\n          var ascene: HTMLElement = document.createElement(\"a-scene\");\n          ascene.setAttribute(\"embedded\", \"\");\n\n          // set model to a-scene\n          // <a-scene embedded>\n          //   <model></model>\n          // </a-scene>;\n          if (model) {\n            for (let j in model) {\n              var modelChild:\n                | NodeListOf<ChildNode>\n                | undefined = this.htmlToNode(model[j]);\n              if (modelChild) ascene.appendChild(modelChild[0]);\n            }\n            // console.log(\"set model to a-scene\");\n            // console.log(ascene);\n          }\n          // set human camera to a-scene\n          // <a-scene embedded>\n          //   <model></model>\n          //   <a-entity camera></a-entity>\n          // </a-scene>;\n          var camera: HTMLElement = document.createElement(\"a-entity\");\n          camera.setAttribute(\"camera\", \"\");\n          camera.setAttribute(\"look-controls\", \"\");\n          camera.setAttribute(\"position\", \"1 1.5 3\");\n          ascene.appendChild(camera);\n\n          // set ascene to list-a-frame\n          //     <div class=\"list-a-frame\">\n          //       <a-scene embedded>\n          //         <model></model>\n          //       </a-scene>\n          //     </div>\n          listAFrame.insertBefore(ascene, listAFrame.firstChild);\n        }\n      }\n    },\n    toItem(key: string) {\n      window.open(\n        `https://web-ar-change-ar-page.firebaseapp.com/?q=${key}`,\n        \"_blank\"\n      );\n    }\n  },\n  created() {\n    // this.getArData();\n  },\n  mounted() {\n    var self = this;\n    setTimeout(function() {\n      self.setDom();\n    }, 1000);\n    // this.$nextTick(() => {});\n  }\n});\n</script>\n\n<style lang=\"scss\">\n#list {\n  .list-data {\n    margin: 0 0 15px 0;\n    padding: 0 10px 30px 10px;\n    border-bottom: 1px solid #c3c3c3;\n\n    .list-title {\n      margin-bottom: 10px;\n      display: flex;\n\n      h3 {\n        margin: 0;\n      }\n\n      img {\n        height: 16px;\n        margin: auto auto auto 10px;\n        cursor: pointer;\n\n        &:hover {\n          transform: scale(1.2);\n          transition: 0.3s;\n        }\n      }\n    }\n\n    span {\n      display: flex;\n\n      * {\n        margin: auto;\n      }\n\n      .list-a-frame {\n        height: 300px;\n        width: 300px;\n        background: #c3c3c3;\n      }\n\n      img {\n        width: 200px;\n      }\n    }\n  }\n\n  a-scene {\n    display: block;\n    width: 300px;\n    height: 300px;\n    background: #c3c3c3;\n  }\n}\n</style>\n\n"]}]}