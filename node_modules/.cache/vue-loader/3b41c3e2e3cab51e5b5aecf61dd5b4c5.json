{"remainingRequest":"/Users/mk/Desktop/git/my-web-ar/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mk/Desktop/git/my-web-ar/src/views/list/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mk/Desktop/git/my-web-ar/src/views/list/index.vue","mtime":1575261825948},{"path":"/Users/mk/Desktop/git/my-web-ar/node_modules/cache-loader/dist/cjs.js","mtime":1575261812576},{"path":"/Users/mk/Desktop/git/my-web-ar/node_modules/babel-loader/lib/index.js","mtime":1575261810540},{"path":"/Users/mk/Desktop/git/my-web-ar/node_modules/cache-loader/dist/cjs.js","mtime":1575261812576},{"path":"/Users/mk/Desktop/git/my-web-ar/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRlbGV0ZUFSOiB1bmRlZmluZWQsCiAgICAgIGFyRGF0YTogbmV3IEFycmF5KCksCiAgICAgIGhpcm86IHJlcXVpcmUoIkAvYXNzZXRzL2ltZy9ISVJPLmpwZyIpLAogICAgICBleHRlcm5hbDogcmVxdWlyZSgiQC9hc3NldHMvc3ZnL2V4dGVybmFsLWxpbmstc3ltYm9sLnN2ZyIpCiAgICB9OwogIH0sCiAgY29tcG9uZW50czoge30sCiAgbWV0aG9kczogewogICAgZ2V0QXJEYXRhKCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHJldHVybiBmaXJlYmFzZQogICAgICAgIC5kYXRhYmFzZSgpCiAgICAgICAgLnJlZigiL2RhdGEiKQogICAgICAgIC5vbmNlKCJ2YWx1ZSIpCiAgICAgICAgLnRoZW4oZnVuY3Rpb24oc25hcHNob3QpIHsKICAgICAgICAgIHZhciByZXMgPSBzbmFwc2hvdC52YWwoKTsKCiAgICAgICAgICBmb3IgKGxldCBpIGluIHJlcykgewogICAgICAgICAgICBzZWxmLmFyRGF0YS5wdXNoKHsKICAgICAgICAgICAgICBrZXk6IGksCiAgICAgICAgICAgICAgdGl0bGU6IHJlc1tpXS50aXRsZSwKICAgICAgICAgICAgICBtYXJrZXI6IHJlc1tpXS5tYXJrZXIsCiAgICAgICAgICAgICAgcXI6IHJlc1tpXS5xciwKICAgICAgICAgICAgICBtb2RlbDogcmVzW2ldLm1vZGVsLAogICAgICAgICAgICAgIG9yaWdpbmFsOiByZXNbaV0ub3JpZ2luYWwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zb2xlLmxvZyhzZWxmLmFyRGF0YSk7CiAgICAgICAgICAvLyDpgIbpoIbjgavjgZnjgosKICAgICAgICAgIHNlbGYuYXJEYXRhID0gc2VsZi5hckRhdGEucmV2ZXJzZSgpOwogICAgICAgIH0pOwogICAgfSwKICAgIGh0bWxUb05vZGUoaHRtbFN0cikgewogICAgICBpZiAoIWh0bWxTdHIgfHwgdHlwZW9mIGh0bWxTdHIgIT09ICJzdHJpbmciKSByZXR1cm47CgogICAgICB2YXIgdG1wRWxtdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLAogICAgICAgIGkgPSAwLAogICAgICAgIGxlbiA9IDAsCiAgICAgICAgbm9kZXMgPSBbXTsKCiAgICAgIC8vIOmrmOmAn+WHpueQhuOBmeOCi+OBjOWvvuW/nOODluODqeOCpuOCtuOCkuiAg+OBiGlubmVySFRNTOOCkuS9v+eUqAogICAgICB0bXBFbG10LmlubmVySFRNTCA9IGh0bWxTdHI7IC8vIHRtcEVsbXQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBodG1sU3RyKTsKCiAgICAgIHJldHVybiB0bXBFbG10LmNoaWxkTm9kZXM7CiAgICB9LAogICAgc2V0RG9tKCkgewogICAgICAvLyBjb25zb2xlLmxvZygic2V0Iik7CgogICAgICB2YXIgYXJEYXRhID0gdGhpcy5hckRhdGE7CgogICAgICBmb3IgKGxldCBpIGluIGFyRGF0YSkgewogICAgICAgIHZhciB0aXRsZSA9IGFyRGF0YVtpXS50aXRsZTsKICAgICAgICB2YXIgbW9kZWwgPSBhckRhdGFbaV0ubW9kZWw7CiAgICAgICAgdmFyIG1hcmtlciA9IGFyRGF0YVtpXS5tYXJrZXI7CiAgICAgICAgdmFyIHFyID0gYXJEYXRhW2ldLnFyOwoKICAgICAgICAvLyBnZXQgZGl2CiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBkYXRhLSR7aX1gKTsKICAgICAgICAvLyBjb25zb2xlLmxvZyhkaXYpOwoKICAgICAgICAvLyBnZXQgc3BhbgogICAgICAgIGlmIChkaXYpIHsKICAgICAgICAgIHZhciBzcGFuID0gZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzcGFuIilbMF07CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzcGFuKTsKICAgICAgICAgIC8vIGdldCBsaXN0LWEtZnJhbWUKICAgICAgICAgIHZhciBsaXN0QUZyYW1lID0gc3Bhbi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJsaXN0LWEtZnJhbWUiKVswXTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGxpc3RBRnJhbWUpOwoKICAgICAgICAgIC8vIGNyZWF0ZSBhLXNjZW5lCiAgICAgICAgICAvLyA8YS1zY2VuZSBlbWJlZGRlZD48L2Etc2NlbmU+OwogICAgICAgICAgdmFyIGFzY2VuZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEtc2NlbmUiKTsKICAgICAgICAgIGFzY2VuZS5zZXRBdHRyaWJ1dGUoImVtYmVkZGVkIiwgIiIpOwoKICAgICAgICAgIC8vIHNldCBtb2RlbCB0byBhLXNjZW5lCiAgICAgICAgICAvLyA8YS1zY2VuZSBlbWJlZGRlZD4KICAgICAgICAgIC8vICAgPG1vZGVsPjwvbW9kZWw+CiAgICAgICAgICAvLyA8L2Etc2NlbmU+OwogICAgICAgICAgaWYgKG1vZGVsKSB7CiAgICAgICAgICAgIGZvciAobGV0IGogaW4gbW9kZWwpIHsKICAgICAgICAgICAgICB2YXIgbW9kZWxDaGlsZCA9IHRoaXMuaHRtbFRvTm9kZShtb2RlbFtqXSk7CiAgICAgICAgICAgICAgaWYgKG1vZGVsQ2hpbGQpIGFzY2VuZS5hcHBlbmRDaGlsZChtb2RlbENoaWxkWzBdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygic2V0IG1vZGVsIHRvIGEtc2NlbmUiKTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYXNjZW5lKTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIHNldCBodW1hbiBjYW1lcmEgdG8gYS1zY2VuZQogICAgICAgICAgLy8gPGEtc2NlbmUgZW1iZWRkZWQ+CiAgICAgICAgICAvLyAgIDxtb2RlbD48L21vZGVsPgogICAgICAgICAgLy8gICA8YS1lbnRpdHkgY2FtZXJhPjwvYS1lbnRpdHk+CiAgICAgICAgICAvLyA8L2Etc2NlbmU+OwogICAgICAgICAgdmFyIGNhbWVyYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEtZW50aXR5Iik7CiAgICAgICAgICBjYW1lcmEuc2V0QXR0cmlidXRlKCJjYW1lcmEiLCAiIik7CiAgICAgICAgICBjYW1lcmEuc2V0QXR0cmlidXRlKCJsb29rLWNvbnRyb2xzIiwgIiIpOwogICAgICAgICAgY2FtZXJhLnNldEF0dHJpYnV0ZSgicG9zaXRpb24iLCAiMSAxLjUgMyIpOwogICAgICAgICAgYXNjZW5lLmFwcGVuZENoaWxkKGNhbWVyYSk7CgogICAgICAgICAgLy8gc2V0IGFzY2VuZSB0byBsaXN0LWEtZnJhbWUKICAgICAgICAgIC8vICAgICA8ZGl2IGNsYXNzPSJsaXN0LWEtZnJhbWUiPgogICAgICAgICAgLy8gICAgICAgPGEtc2NlbmUgZW1iZWRkZWQ+CiAgICAgICAgICAvLyAgICAgICAgIDxtb2RlbD48L21vZGVsPgogICAgICAgICAgLy8gICAgICAgPC9hLXNjZW5lPgogICAgICAgICAgLy8gICAgIDwvZGl2PgogICAgICAgICAgbGlzdEFGcmFtZS5pbnNlcnRCZWZvcmUoYXNjZW5lLCBsaXN0QUZyYW1lLmZpcnN0Q2hpbGQpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHRvSXRlbShrZXkpIHsKICAgICAgd2luZG93Lm9wZW4oCiAgICAgICAgYGh0dHBzOi8vd2ViLWFyLWNoYW5nZS1hci1wYWdlLmZpcmViYXNlYXBwLmNvbS8/cT0ke2tleX1gLAogICAgICAgICJfYmxhbmsiCiAgICAgICk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRBckRhdGEoKTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICBzZWxmLnNldERvbSgpOwogICAgfSwgMTAwMCk7CiAgICAvLyB0aGlzLiRuZXh0VGljaygoKSA9PiB7fSk7CiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/list","sourcesContent":["<template>\n  <div id=\"list\">\n    <h2>リスト</h2>\n    <div v-for=\"(item, i) in arData\" :key=\"i\" :id=\"'data-'+i\" class=\"list-data\">\n      <div class=\"list-title\">\n        <h3>{{item.title}}</h3>\n        <img :src=\"external\" @click=\"toItem(item.key)\" />\n      </div>\n      <span>\n        <div class=\"list-a-frame\">\n          <a-scene v-html=\"item.model\" embedded>\n            <a-entity camera look-controls position></a-entity>\n          </a-scene>\n        </div>\n        <img v-if=\"item.original\" :src=\"item.marker\" id=\"marker\" />\n        <img v-else :src=\"hiro\" id=\"marker\" />\n        <img :src=\"item.qr\" id=\"qr\" />\n      </span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport firebase from \"firebase\";\n\nexport default {\n  data() {\n    return {\n      deleteAR: undefined,\n      arData: new Array(),\n      hiro: require(\"@/assets/img/HIRO.jpg\"),\n      external: require(\"@/assets/svg/external-link-symbol.svg\")\n    };\n  },\n  components: {},\n  methods: {\n    getArData() {\n      var self = this;\n      return firebase\n        .database()\n        .ref(\"/data\")\n        .once(\"value\")\n        .then(function(snapshot) {\n          var res = snapshot.val();\n\n          for (let i in res) {\n            self.arData.push({\n              key: i,\n              title: res[i].title,\n              marker: res[i].marker,\n              qr: res[i].qr,\n              model: res[i].model,\n              original: res[i].original\n            });\n          }\n          console.log(self.arData);\n          // 逆順にする\n          self.arData = self.arData.reverse();\n        });\n    },\n    htmlToNode(htmlStr) {\n      if (!htmlStr || typeof htmlStr !== \"string\") return;\n\n      var tmpElmt = document.createElement(\"div\"),\n        i = 0,\n        len = 0,\n        nodes = [];\n\n      // 高速処理するが対応ブラウザを考えinnerHTMLを使用\n      tmpElmt.innerHTML = htmlStr; // tmpElmt.insertAdjacentHTML('beforeend', htmlStr);\n\n      return tmpElmt.childNodes;\n    },\n    setDom() {\n      // console.log(\"set\");\n\n      var arData = this.arData;\n\n      for (let i in arData) {\n        var title = arData[i].title;\n        var model = arData[i].model;\n        var marker = arData[i].marker;\n        var qr = arData[i].qr;\n\n        // get div\n        var div = document.getElementById(`data-${i}`);\n        // console.log(div);\n\n        // get span\n        if (div) {\n          var span = div.getElementsByTagName(\"span\")[0];\n          // console.log(span);\n          // get list-a-frame\n          var listAFrame = span.getElementsByClassName(\"list-a-frame\")[0];\n          // console.log(listAFrame);\n\n          // create a-scene\n          // <a-scene embedded></a-scene>;\n          var ascene = document.createElement(\"a-scene\");\n          ascene.setAttribute(\"embedded\", \"\");\n\n          // set model to a-scene\n          // <a-scene embedded>\n          //   <model></model>\n          // </a-scene>;\n          if (model) {\n            for (let j in model) {\n              var modelChild = this.htmlToNode(model[j]);\n              if (modelChild) ascene.appendChild(modelChild[0]);\n            }\n            // console.log(\"set model to a-scene\");\n            // console.log(ascene);\n          }\n          // set human camera to a-scene\n          // <a-scene embedded>\n          //   <model></model>\n          //   <a-entity camera></a-entity>\n          // </a-scene>;\n          var camera = document.createElement(\"a-entity\");\n          camera.setAttribute(\"camera\", \"\");\n          camera.setAttribute(\"look-controls\", \"\");\n          camera.setAttribute(\"position\", \"1 1.5 3\");\n          ascene.appendChild(camera);\n\n          // set ascene to list-a-frame\n          //     <div class=\"list-a-frame\">\n          //       <a-scene embedded>\n          //         <model></model>\n          //       </a-scene>\n          //     </div>\n          listAFrame.insertBefore(ascene, listAFrame.firstChild);\n        }\n      }\n    },\n    toItem(key) {\n      window.open(\n        `https://web-ar-change-ar-page.firebaseapp.com/?q=${key}`,\n        \"_blank\"\n      );\n    }\n  },\n  created() {\n    this.getArData();\n  },\n  mounted() {\n    var self = this;\n    setTimeout(function() {\n      self.setDom();\n    }, 1000);\n    // this.$nextTick(() => {});\n  }\n};\n</script>\n\n<style lang=\"scss\">\n#list {\n  .list-data {\n    margin: 0 0 15px 0;\n    padding: 0 10px 30px 10px;\n    border-bottom: 1px solid #c3c3c3;\n\n    .list-title {\n      margin-bottom: 10px;\n      display: flex;\n\n      h3 {\n        margin: 0;\n      }\n\n      img {\n        height: 16px;\n        margin: auto auto auto 10px;\n        cursor: pointer;\n\n        &:hover {\n          transform: scale(1.2);\n          transition: 0.3s;\n        }\n      }\n    }\n\n    span {\n      display: flex;\n\n      * {\n        margin: auto;\n      }\n\n      .list-a-frame {\n        height: 300px;\n        width: 300px;\n        background: #c3c3c3;\n      }\n\n      img {\n        width: 200px;\n      }\n    }\n  }\n\n  a-scene {\n    display: block;\n    width: 300px;\n    height: 300px;\n    background: #c3c3c3;\n  }\n}\n</style>\n\n"]}]}