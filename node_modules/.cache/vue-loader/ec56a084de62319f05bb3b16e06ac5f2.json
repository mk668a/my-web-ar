{"remainingRequest":"/Users/mk/Desktop/webar/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mk/Desktop/webar/src/views/create/generator.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mk/Desktop/webar/src/views/create/generator.vue","mtime":1574694489815},{"path":"/Users/mk/Desktop/webar/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mk/Desktop/webar/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mk/Desktop/webar/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mk/Desktop/webar/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmltcG9ydCBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlubmVySW1hZ2VVUkw6ICJpbm5lci1pbWFnZXMvaW5uZXItYXJqcy5wbmciLAogICAgICBmdWxsTWFya2VyVVJMOiBudWxsLAogICAgICBpbWFnZU5hbWU6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBjcmVhdGVQYXR0ZXJuRmlsZVN0cmluZygpIHsKICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7CiAgICAgIC8vIGNvcHkgaW1hZ2Ugb24gY2FudmFzCiAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsKICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY2FudmFzLndpZHRoID0gMTY7CiAgICAgIGNhbnZhcy5oZWlnaHQgPSAxNjsKCiAgICAgIC8vIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2FudmFzKQogICAgICAvLyBjYW52YXMuc3R5bGUud2lkdGggPSAnMjAwcHgnCgogICAgICB2YXIgcGF0dGVybkZpbGVTdHJpbmcgPSAiIjsKICAgICAgZm9yICgKICAgICAgICB2YXIgb3JpZW50YXRpb24gPSAwOwogICAgICAgIG9yaWVudGF0aW9uID4gLTIgKiBNYXRoLlBJOwogICAgICAgIG9yaWVudGF0aW9uIC09IE1hdGguUEkgLyAyCiAgICAgICkgewogICAgICAgIC8vIGRyYXcgb24gY2FudmFzIC0gaG9ub3Igb3JpZW50YXRpb24KICAgICAgICBjb250ZXh0LnNhdmUoKTsKICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgIGNvbnRleHQudHJhbnNsYXRlKGNhbnZhcy53aWR0aCAvIDIsIGNhbnZhcy5oZWlnaHQgLyAyKTsKICAgICAgICBjb250ZXh0LnJvdGF0ZShvcmllbnRhdGlvbik7CiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoCiAgICAgICAgICBpbWFnZSwKICAgICAgICAgIC1jYW52YXMud2lkdGggLyAyLAogICAgICAgICAgLWNhbnZhcy5oZWlnaHQgLyAyLAogICAgICAgICAgY2FudmFzLndpZHRoLAogICAgICAgICAgY2FudmFzLmhlaWdodAogICAgICAgICk7CiAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7CgogICAgICAgIC8vIGdldCBpbWFnZURhdGEKICAgICAgICB2YXIgaW1hZ2VEYXRhID0gY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKCiAgICAgICAgLy8gZ2VuZXJhdGUgdGhlIHBhdHRlcm5GaWxlU3RyaW5nIGZvciB0aGlzIG9yaWVudGF0aW9uCiAgICAgICAgaWYgKG9yaWVudGF0aW9uICE9PSAwKSBwYXR0ZXJuRmlsZVN0cmluZyArPSAiXG4iOwogICAgICAgIC8vIE5PVEUgYmdyIG9yZGVyIGFuZCBub3QgcmdiISEhIHNvIGZyb20gMiB0byAwCiAgICAgICAgZm9yICh2YXIgY2hhbm5lbE9mZnNldCA9IDI7IGNoYW5uZWxPZmZzZXQgPj0gMDsgY2hhbm5lbE9mZnNldC0tKSB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY2hhbm5lbE9mZnNldCcsIGNoYW5uZWxPZmZzZXQpCiAgICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGltYWdlRGF0YS5oZWlnaHQ7IHkrKykgewogICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGltYWdlRGF0YS53aWR0aDsgeCsrKSB7CiAgICAgICAgICAgICAgaWYgKHggIT09IDApIHBhdHRlcm5GaWxlU3RyaW5nICs9ICIgIjsKCiAgICAgICAgICAgICAgdmFyIG9mZnNldCA9IHkgKiBpbWFnZURhdGEud2lkdGggKiA0ICsgeCAqIDQgKyBjaGFubmVsT2Zmc2V0OwogICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGltYWdlRGF0YS5kYXRhW29mZnNldF07CgogICAgICAgICAgICAgIHBhdHRlcm5GaWxlU3RyaW5nICs9IFN0cmluZyh2YWx1ZSkucGFkU3RhcnQoMyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcGF0dGVybkZpbGVTdHJpbmcgKz0gIlxuIjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBwYXR0ZXJuRmlsZVN0cmluZzsKICAgIH0sCiAgICBnZXRQYXR0KCkgewogICAgICBjb25zdCBzZWxmID0gdGhpczsKICAgICAgaWYgKHNlbGYuaW5uZXJJbWFnZVVSTCA9PT0gbnVsbCkgewogICAgICAgIGFsZXJ0KCJ1cGxvYWQgYSBmaWxlIGZpcnN0Iik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnNvbGUuYXNzZXJ0KHNlbGYuaW5uZXJJbWFnZVVSTCk7CiAgICAgIFRIUkVFeC5BclBhdHRlcm5GaWxlLmVuY29kZUltYWdlVVJMKAogICAgICAgIHNlbGYuaW5uZXJJbWFnZVVSTCwKICAgICAgICBmdW5jdGlvbiBvbkNvbXBsZXRlKHBhdHRlcm5GaWxlU3RyaW5nKSB7CiAgICAgICAgICBzZWxmLmZpbGVOYW1lID0gInBhdHRlcm4tIiArIChzZWxmLmltYWdlTmFtZSB8fCAibWFya2VyIikgKyAiLnBhdHQiOwogICAgICAgICAgLy8gdGVjaCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM2NjUxMTUvY3JlYXRlLWEtZmlsZS1pbi1tZW1vcnktZm9yLXVzZXItdG8tZG93bmxvYWQtbm90LXRocm91Z2gtc2VydmVyCiAgICAgICAgICAvLyB2YXIgZG9tRWxlbWVudCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICAvLyBkb21FbGVtZW50LmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTCgKICAgICAgICAgIC8vICAgbmV3IEJsb2IoW3BhdHRlcm5GaWxlU3RyaW5nXSwgeyB0eXBlOiAidGV4dC9wbGFpbiIgfSkKICAgICAgICAgIC8vICk7CiAgICAgICAgICAvLyBkb21FbGVtZW50LmRvd25sb2FkID0gc2VsZi5maWxlTmFtZTsKICAgICAgICAgIC8vIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZG9tRWxlbWVudCk7CiAgICAgICAgICAvLyBkb21FbGVtZW50LmNsaWNrKCk7CgogICAgICAgICAgLy8gc3RhdGXjgavjg5Hjgr/jg7zjg7Pjga7jg4Djgqbjg7Pjg63jg7zjg4lVUkzjgpLjgrvjg4Pjg4gKICAgICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW3BhdHRlcm5GaWxlU3RyaW5nXSwgeyB0eXBlOiAidGV4dC9wbGFpbiIgfSk7CiAgICAgICAgICBjb25zb2xlLmxvZygiZ2V0UGF0dCIpOwogICAgICAgICAgLy8gY29uc29sZS5sb2coZG9tRWxlbWVudC5ocmVmKTsKICAgICAgICAgIHNlbGYuJGVtaXQoImJsb2IiLCBibG9iKTsKCiAgICAgICAgICAvLyBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRvbUVsZW1lbnQpOwogICAgICAgIH0KICAgICAgKTsKICAgIH0sCiAgICBnZXRNYXJrZXIoKSB7CiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzOwogICAgICAvLyBkZWJ1Z2dlcgogICAgICBpZiAoc2VsZi5pbm5lckltYWdlVVJMID09PSBudWxsKSB7CiAgICAgICAgYWxlcnQoInVwbG9hZCBhIGZpbGUgZmlyc3QiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgLy8gdGVjaCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM2NjUxMTUvY3JlYXRlLWEtZmlsZS1pbi1tZW1vcnktZm9yLXVzZXItdG8tZG93bmxvYWQtbm90LXRocm91Z2gtc2VydmVyCiAgICAgIHZhciBkb21FbGVtZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgZG9tRWxlbWVudC5ocmVmID0gdGhpcy5mdWxsTWFya2VyVVJMOwogICAgICAvLyBzZXQgZmlsZU5hbWUKICAgICAgZG9tRWxlbWVudC5kb3dubG9hZCA9ICJwYXR0ZXJuLSIgKyAoc2VsZi5pbWFnZU5hbWUgfHwgIm1hcmtlciIpICsgIi5wbmciOwoKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkb21FbGVtZW50KTsKCiAgICAgIC8vIOOCr+ODquODg+OCr+OCpOODmeODs+ODiOOBp+ODgOOCpuODs+ODreODvOODiQogICAgICAvLyBkb21FbGVtZW50LmNsaWNrKCk7CiAgICAgIC8vCiAgICAgIGNvbnNvbGUubG9nKCJnZXRNYXJrZXIiKTsKCiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZG9tRWxlbWVudCk7CgogICAgICByZXR1cm4gZG9tRWxlbWVudC5nZXRBdHRyaWJ1dGUoImhyZWYiKTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBjb25zdCBzZWxmID0gdGhpczsKCiAgICAvLyB2YXIgaW5uZXJJbWFnZVVSTCA9IG51bGw7CiAgICB2YXIgZnVsbE1hcmtlclVSTCA9IG51bGw7CiAgICAvLyB2YXIgaW1hZ2VOYW1lID0gbnVsbDsKICAgIHNlbGYuaW5uZXJJbWFnZVVSTCA9ICJpbm5lci1pbWFnZXMvaW5uZXItYXJqcy5wbmciOwogICAgdXBkYXRlRnVsbE1hcmtlckltYWdlKCk7CiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjYnV0dG9uRG93bmxvYWRFbmNvZGVkIik7CgogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2J1dHRvbkRvd25sb2FkRnVsbEltYWdlIik7CgogICAgZG9jdW1lbnQKICAgICAgLnF1ZXJ5U2VsZWN0b3IoIiNwYXR0ZXJuUmF0aW9TbGlkZXIiKQogICAgICAuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLCBmdW5jdGlvbigpIHsKICAgICAgICAvLyB1cGRhdGUgdGhlIHBhdHRlcm5SYXRpbyBudW1iZXIKICAgICAgICB2YXIgcGF0dGVyblJhdGlvID0KICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNwYXR0ZXJuUmF0aW9TbGlkZXIiKS52YWx1ZSAvIDEwMDsKICAgICAgICB2YXIgZG9tRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCiAgICAgICAgICAiW2Zvcj1wYXR0ZXJuUmF0aW9TbGlkZXJdIHNwYW4iCiAgICAgICAgKTsKICAgICAgICBkb21FbGVtZW50LmlubmVySFRNTCA9IGDjg5Hjgr/jg7zjg7Pmr5TnjocgJHtwYXR0ZXJuUmF0aW8udG9GaXhlZCgyKX1gOwogICAgICAgIC8vIHVwZGF0ZSBmdWxsTWFya2VySW1hZ2UKICAgICAgICB1cGRhdGVGdWxsTWFya2VySW1hZ2UoKTsKICAgICAgfSk7CiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjaW1hZ2VTaXplIikuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLCBmdW5jdGlvbigpIHsKICAgICAgLy8gdXBkYXRlIHRoZSBwYXR0ZXJuUmF0aW8gbnVtYmVyCiAgICAgIHZhciBpbWFnZVNpemUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjaW1hZ2VTaXplIikudmFsdWU7CiAgICAgIHZhciBkb21FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiW2Zvcj1pbWFnZVNpemVdIHNwYW4iKTsKICAgICAgZG9tRWxlbWVudC5pbm5lckhUTUwgPSBg55S75YOP44K144Kk44K6ICR7aW1hZ2VTaXplfXB4YDsKICAgICAgLy8gdXBkYXRlIGZ1bGxNYXJrZXJJbWFnZQogICAgICB1cGRhdGVGdWxsTWFya2VySW1hZ2UoKTsKICAgIH0pOwogICAgZG9jdW1lbnQKICAgICAgLnF1ZXJ5U2VsZWN0b3IoIiNib3JkZXJDb2xvciIpCiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCJpbnB1dCIsIGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBpbWFnZVNpemUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjYm9yZGVyQ29sb3IiKS52YWx1ZTsKICAgICAgICB2YXIgZG9tRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIltmb3I9Ym9yZGVyQ29sb3JdIHNwYW4iKTsKICAgICAgICAvLyB1cGRhdGUgZnVsbE1hcmtlckltYWdlCiAgICAgICAgdXBkYXRlRnVsbE1hcmtlckltYWdlKCk7CiAgICAgIH0pOwogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2ZpbGVpbnB1dCIpLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07CiAgICAgIHNlbGYuaW1hZ2VOYW1lID0gZmlsZS5uYW1lOwogICAgICAvLyByZW1vdmUgZmlsZSBleHRlbnNpb24KICAgICAgc2VsZi5pbWFnZU5hbWUgPQogICAgICAgIHNlbGYuaW1hZ2VOYW1lLnN1YnN0cmluZygwLCBzZWxmLmltYWdlTmFtZS5sYXN0SW5kZXhPZigiLiIpKSB8fAogICAgICAgIHNlbGYuaW1hZ2VOYW1lOwogICAgICAvLyBkZWJ1Z2dlcgogICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgc2VsZi5pbm5lckltYWdlVVJMID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICB1cGRhdGVGdWxsTWFya2VySW1hZ2UoKTsKICAgICAgfTsKICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CiAgICB9KTsKCiAgICBmdW5jdGlvbiB1cGRhdGVGdWxsTWFya2VySW1hZ2UoKSB7CiAgICAgIC8vIGdldCBwYXR0ZXJuUmF0aW8KICAgICAgdmFyIHBhdHRlcm5SYXRpbyA9CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3BhdHRlcm5SYXRpb1NsaWRlciIpLnZhbHVlIC8gMTAwOwogICAgICB2YXIgaW1hZ2VTaXplID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2ltYWdlU2l6ZSIpLnZhbHVlOwogICAgICB2YXIgYm9yZGVyQ29sb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjYm9yZGVyQ29sb3IiKS52YWx1ZTsKICAgICAgZnVuY3Rpb24gaGV4YUNvbG9yKGNvbG9yKSB7CiAgICAgICAgcmV0dXJuIC9eI1swLTlBLUZdezZ9JC9pLnRlc3QoY29sb3IpOwogICAgICB9CiAgICAgIHZhciBzID0gbmV3IE9wdGlvbigpLnN0eWxlOwogICAgICBzLmNvbG9yID0gYm9yZGVyQ29sb3I7CiAgICAgIGlmICgKICAgICAgICBib3JkZXJDb2xvciA9PT0gIiIgfHwKICAgICAgICAocy5jb2xvciAhPSBib3JkZXJDb2xvciAmJiAhaGV4YUNvbG9yKGJvcmRlckNvbG9yKSkKICAgICAgKSB7CiAgICAgICAgLy8gaWYgY29sb3Igbm90IHZhbGlkLCB1c2UgYmxhY2sKICAgICAgICBib3JkZXJDb2xvciA9ICJibGFjayI7CiAgICAgIH0KICAgICAgVEhSRUV4LkFyUGF0dGVybkZpbGUuYnVpbGRGdWxsTWFya2VyKAogICAgICAgIHNlbGYuaW5uZXJJbWFnZVVSTCwKICAgICAgICBwYXR0ZXJuUmF0aW8sCiAgICAgICAgaW1hZ2VTaXplLAogICAgICAgIGJvcmRlckNvbG9yLAogICAgICAgIGZ1bmN0aW9uIG9uQ29tcGxldGUobWFya2VyVXJsKSB7CiAgICAgICAgICBmdWxsTWFya2VyVVJMID0gbWFya2VyVXJsOwogICAgICAgICAgdmFyIGZ1bGxNYXJrZXJJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogICAgICAgICAgZnVsbE1hcmtlckltYWdlLnNyYyA9IGZ1bGxNYXJrZXJVUkw7CiAgICAgICAgICBzZWxmLmZ1bGxNYXJrZXJVUkwgPSBmdWxsTWFya2VyVVJMOwogICAgICAgICAgLy8gcHV0IGZ1bGxNYXJrZXJJbWFnZSBpbnRvICNpbWFnZUNvbnRhaW5lcgogICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNpbWFnZUNvbnRhaW5lciIpOwogICAgICAgICAgd2hpbGUgKGNvbnRhaW5lci5maXJzdENoaWxkKQogICAgICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmZpcnN0Q2hpbGQpOwogICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZ1bGxNYXJrZXJJbWFnZSk7CiAgICAgICAgfQogICAgICApOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["generator.vue"],"names":[],"mappings":";;;;;AAKA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"generator.vue","sourceRoot":"src/views/create","sourcesContent":["<template>\n  <div class=\"markerTraining\"></div>\n</template>\n\n<script>\nimport firebase from \"firebase\";\n\nexport default {\n  data() {\n    return {\n      innerImageURL: \"inner-images/inner-arjs.png\",\n      fullMarkerURL: null,\n      imageName: null\n    };\n  },\n  methods: {\n    createPatternFileString() {\n      var image = new Image();\n      // copy image on canvas\n      var canvas = document.createElement(\"canvas\");\n      var context = canvas.getContext(\"2d\");\n      canvas.width = 16;\n      canvas.height = 16;\n\n      // document.body.appendChild(canvas)\n      // canvas.style.width = '200px'\n\n      var patternFileString = \"\";\n      for (\n        var orientation = 0;\n        orientation > -2 * Math.PI;\n        orientation -= Math.PI / 2\n      ) {\n        // draw on canvas - honor orientation\n        context.save();\n        context.clearRect(0, 0, canvas.width, canvas.height);\n        context.translate(canvas.width / 2, canvas.height / 2);\n        context.rotate(orientation);\n        context.drawImage(\n          image,\n          -canvas.width / 2,\n          -canvas.height / 2,\n          canvas.width,\n          canvas.height\n        );\n        context.restore();\n\n        // get imageData\n        var imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n\n        // generate the patternFileString for this orientation\n        if (orientation !== 0) patternFileString += \"\\n\";\n        // NOTE bgr order and not rgb!!! so from 2 to 0\n        for (var channelOffset = 2; channelOffset >= 0; channelOffset--) {\n          // console.log('channelOffset', channelOffset)\n          for (var y = 0; y < imageData.height; y++) {\n            for (var x = 0; x < imageData.width; x++) {\n              if (x !== 0) patternFileString += \" \";\n\n              var offset = y * imageData.width * 4 + x * 4 + channelOffset;\n              var value = imageData.data[offset];\n\n              patternFileString += String(value).padStart(3);\n            }\n            patternFileString += \"\\n\";\n          }\n        }\n      }\n\n      return patternFileString;\n    },\n    getPatt() {\n      const self = this;\n      if (self.innerImageURL === null) {\n        alert(\"upload a file first\");\n        return;\n      }\n      console.assert(self.innerImageURL);\n      THREEx.ArPatternFile.encodeImageURL(\n        self.innerImageURL,\n        function onComplete(patternFileString) {\n          self.fileName = \"pattern-\" + (self.imageName || \"marker\") + \".patt\";\n          // tech from https://stackoverflow.com/questions/3665115/create-a-file-in-memory-for-user-to-download-not-through-server\n          // var domElement = window.document.createElement(\"a\");\n          // domElement.href = window.URL.createObjectURL(\n          //   new Blob([patternFileString], { type: \"text/plain\" })\n          // );\n          // domElement.download = self.fileName;\n          // document.body.appendChild(domElement);\n          // domElement.click();\n\n          // stateにパターンのダウンロードURLをセット\n          var blob = new Blob([patternFileString], { type: \"text/plain\" });\n          console.log(\"getPatt\");\n          // console.log(domElement.href);\n          self.$emit(\"blob\", blob);\n\n          // document.body.removeChild(domElement);\n        }\n      );\n    },\n    getMarker() {\n      const self = this;\n      // debugger\n      if (self.innerImageURL === null) {\n        alert(\"upload a file first\");\n        return;\n      }\n      // tech from https://stackoverflow.com/questions/3665115/create-a-file-in-memory-for-user-to-download-not-through-server\n      var domElement = window.document.createElement(\"a\");\n      domElement.href = this.fullMarkerURL;\n      // set fileName\n      domElement.download = \"pattern-\" + (self.imageName || \"marker\") + \".png\";\n\n      document.body.appendChild(domElement);\n\n      // クリックイベントでダウンロード\n      // domElement.click();\n      //\n      console.log(\"getMarker\");\n\n      document.body.removeChild(domElement);\n\n      return domElement.getAttribute(\"href\");\n    }\n  },\n  mounted() {\n    const self = this;\n\n    // var innerImageURL = null;\n    var fullMarkerURL = null;\n    // var imageName = null;\n    self.innerImageURL = \"inner-images/inner-arjs.png\";\n    updateFullMarkerImage();\n    document.querySelector(\"#buttonDownloadEncoded\");\n\n    document.querySelector(\"#buttonDownloadFullImage\");\n\n    document\n      .querySelector(\"#patternRatioSlider\")\n      .addEventListener(\"input\", function() {\n        // update the patternRatio number\n        var patternRatio =\n          document.querySelector(\"#patternRatioSlider\").value / 100;\n        var domElement = document.querySelector(\n          \"[for=patternRatioSlider] span\"\n        );\n        domElement.innerHTML = `パターン比率 ${patternRatio.toFixed(2)}`;\n        // update fullMarkerImage\n        updateFullMarkerImage();\n      });\n    document.querySelector(\"#imageSize\").addEventListener(\"input\", function() {\n      // update the patternRatio number\n      var imageSize = document.querySelector(\"#imageSize\").value;\n      var domElement = document.querySelector(\"[for=imageSize] span\");\n      domElement.innerHTML = `画像サイズ ${imageSize}px`;\n      // update fullMarkerImage\n      updateFullMarkerImage();\n    });\n    document\n      .querySelector(\"#borderColor\")\n      .addEventListener(\"input\", function() {\n        var imageSize = document.querySelector(\"#borderColor\").value;\n        var domElement = document.querySelector(\"[for=borderColor] span\");\n        // update fullMarkerImage\n        updateFullMarkerImage();\n      });\n    document.querySelector(\"#fileinput\").addEventListener(\"change\", function() {\n      var file = this.files[0];\n      self.imageName = file.name;\n      // remove file extension\n      self.imageName =\n        self.imageName.substring(0, self.imageName.lastIndexOf(\".\")) ||\n        self.imageName;\n      // debugger\n      var reader = new FileReader();\n      reader.onload = function(event) {\n        self.innerImageURL = event.target.result;\n        updateFullMarkerImage();\n      };\n      reader.readAsDataURL(file);\n    });\n\n    function updateFullMarkerImage() {\n      // get patternRatio\n      var patternRatio =\n        document.querySelector(\"#patternRatioSlider\").value / 100;\n      var imageSize = document.querySelector(\"#imageSize\").value;\n      var borderColor = document.querySelector(\"#borderColor\").value;\n      function hexaColor(color) {\n        return /^#[0-9A-F]{6}$/i.test(color);\n      }\n      var s = new Option().style;\n      s.color = borderColor;\n      if (\n        borderColor === \"\" ||\n        (s.color != borderColor && !hexaColor(borderColor))\n      ) {\n        // if color not valid, use black\n        borderColor = \"black\";\n      }\n      THREEx.ArPatternFile.buildFullMarker(\n        self.innerImageURL,\n        patternRatio,\n        imageSize,\n        borderColor,\n        function onComplete(markerUrl) {\n          fullMarkerURL = markerUrl;\n          var fullMarkerImage = document.createElement(\"img\");\n          fullMarkerImage.src = fullMarkerURL;\n          self.fullMarkerURL = fullMarkerURL;\n          // put fullMarkerImage into #imageContainer\n          var container = document.querySelector(\"#imageContainer\");\n          while (container.firstChild)\n            container.removeChild(container.firstChild);\n          container.appendChild(fullMarkerImage);\n        }\n      );\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.markerTraining {\n  display: flex;\n\n  .mdl-grid {\n    .mdl-cell {\n      * {\n        margin-bottom: 15px;\n      }\n\n      label {\n        display: block;\n        cursor: pointer;\n\n        * {\n          cursor: pointer;\n        }\n\n        input {\n          display: block;\n        }\n      }\n\n      .mdl-tooltip {\n        display: none;\n      }\n\n      #buttonUpload {\n        border: 1px solid black;\n        border-radius: 5px;\n        padding: 10px;\n      }\n    }\n  }\n\n  #marker {\n    width: 40%;\n    margin: 0 !important;\n  }\n\n  // h1 {\n  //   text-align: center;\n  //   font-size: 500%;\n  // }\n\n  // div.mdl-cell {\n  //   text-align: center;\n  // }\n\n  // h1 a {\n  //   text-decoration: none;\n  // }\n\n  // h1 a:hover {\n  //   text-decoration: underline;\n  // }\n\n  #imageContainer img {\n    width: 100%;\n    max-width: 512px;\n  }\n}\n</style>"]}]}